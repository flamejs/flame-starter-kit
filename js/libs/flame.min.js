!function(){"use strict";window.Flame=Ember.Namespace.create()}(),function(){"use strict";Ember.computed.notEqual=function(e,t){return Ember.computed(e,function(){return t!==Ember.get(this,e)})},Flame.computed={trueFalse:function(e,t,i){return Ember.computed(e,function(){return Ember.get(this,e)?t:i})}}}(),function(){"use strict";function e(e,n,s,r){var o="";if(t.test(s)){var a=s.match(i);s=a[1],o=a[2]}for(var l=e.get("parentView"),h="parentView";l&&!(s in l);)l=l.get("parentView"),h+=".parentView";h+="."+s+o,"undefined"==typeof r&&(r=Ember.computed.alias),Ember.defineProperty(e,n,r(h))}Flame.computed.nearest=function(t,i){var n="__"+t.replace(/\./g,"_");return Ember.computed(n,function(s,r){return Ember.meta(this).descs[n]||e(this,n,t,i),arguments.length>1&&this.set(n,r),this.get(n)})};var t=/[\.]/,i=/([^\.]+)(\..*)/}(),function(){"use strict";/msie 9/i.test(window.navigator.userAgent)&&Ember.$(function(){Ember.$("body").on("selectstart",function(e){var t=Ember.$(e.target);return["INPUT","TEXTAREA"].contains(e.target.tagName)||t.parents().andSelf().is(".is-selectable")||"true"===t.attr("contenteditable")})})}(),function(){"use strict";Flame.imagePath="images/"}(),function(){"use strict";Ember.mixin(Flame,{image:function(e){return"undefined"==typeof FlameImageUrlPrefix?(Flame.imagePath||"")+e:FlameImageUrlPrefix+e}})}(),function(){"use strict";jQuery.fn.selectRange=function(e,t){return this.each(function(){if(this.setSelectionRange)this.focus(),this.setSelectionRange(e,t);else if(this.createTextRange){var i=this.createTextRange();i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",e),i.select()}})},jQuery.fn.safeClone=function(){var e=jQuery(this).clone();return e.find("script[id^=metamorph]").remove(),e.find("*").each(function(){var e,t,i=jQuery(this),n=i[0].attributes.length;for(e=0;n>e;e++)t=i[0].attributes[e],t&&/^data-(bindattr|ember)/.test(t.name)&&i.removeAttr(t.name)}),e.find("[id^=ember]").removeAttr("id"),e}}(),function(){"use strict";var e=/^[\^\$]/;Ember.mixin(Ember.Binding.prototype,{connect:function(t){return e.test(this._from)?void 0:this._super(t)}});var t=/Binding$/,i=/^(\^|\$)([^.]+)(.*)$/;Flame.reopen({_bindPrefixedBindings:function(e){var t=!1;for(var i in e)this._bindPrefixed(i,e)&&(t=!0);return t},_bindPrefixed:function(e,n){var s=!1;if(t.test(e)){var r=n[e],o=r._from.match(i);if(o){s=!0;var a,l="$"===o[1],h=o[2],u=o[3];a=l?this._lookupValueOfProperty(n,h):this._lookupPathToProperty(n,h);var c=a+u,d=r.copy();d._from=c,d.connect(n),r._resolved_form=d._resolved_form=d._from,r._unresolved_form=d._unresolved_form=r._from}}return s},_lookupValueOfProperty:function(e,t){for(var i,n=e;void 0===i&&null!==i&&void 0!==n&&null!==n;)i=n.get(t),n=n.get("parentView");return i},_lookupPathToProperty:function(e,t){for(var i=[t,"parentView"],n=e.get("parentView"),s=t+"Binding";!Ember.isNone(n);){if("undefined"!=typeof Ember.get(n,t)||"undefined"!=typeof Ember.get(n,s))return i.reverse().join(".");i.push("parentView"),n=n.get("parentView")}return void 0}})}(),function(){"use strict";for(var e=0,t=["ms","moz","webkit","o"],i=0;i<t.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[t[i]+"RequestAnimationFrame"],window.cancelRequestAnimationFrame=window[t[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var i=(new Date).getTime(),n=Math.max(0,16-(i-e)),s=window.setTimeout(function(){t(i+n)},n);return e=i+n,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),function(){"use strict";Flame.SortingArrayProxy=Ember.ArrayProxy.extend({sortKey:"position",parent:null,_suppressObservers:!1,init:function(){this._sourceDidChange(),this._super(),this.get("content").addArrayObserver(this,{willChange:"_contentArrayWillChange",didChange:"_contentArrayDidChange"})},content:function(e,t){void 0!==t&&this.set("_content",t);var i=this.get("_content");return void 0===i&&this.set("_content",i=[]),i}.property().volatile(),startMoving:function(){this._suppressObservers=!0},endMoving:function(){this._suppressObservers=!1;var e=this.get("content"),t=this.get("sortKey");this._withObserversSuppressed(function(){this._reAssignSortKeys(e,t)},this)},_sourceWillChange:function(){var e=this.get("source");if(e){var t=this;e.forEach(function(e){t._removeSortIndexObserverFor(e)}),e.removeArrayObserver(this,{willChange:"_sourceArrayWillChange",didChange:"_sourceArrayDidChange"})}}.observesBefore("source"),_sourceDidChange:function(){var e=this.get("source");if(e){var t=e.slice();this._sort(t);var i=this.get("content");i.replace(0,i.get("length"),t);var n=this;i.forEach(function(e){n._addSortIndexObserverAndRegisterForRemoval(e)}),e.addArrayObserver(this,{willChange:"_sourceArrayWillChange",didChange:"_sourceArrayDidChange"})}}.observes("source"),_addSortIndexObserverAndRegisterForRemoval:function(e){var t=this.get("sortKey");e.lastPosition=e.get(t);var i=function(){this._indexChanged(e)};Ember.addObserver(e,t,this,i),e[this.get("observerKey")]=i},_removeSortIndexObserverFor:function(e){var t=e[this.get("observerKey")];t&&(Ember.removeObserver(e,this.get("sortKey"),this,t),delete e[this.get("observerKey")])},_getObserverKey:function(){return"__observer_"+Ember.guidFor(this)}.property(),_indexChanged:function(e){e.lastPosition===e.get(this.get("sortKey"))||this._suppressObservers||this._sortAndReplaceContent(this.get("content").slice())},_sourceArrayWillChange:function(e,t,i){var n=this.get("content"),s=this;this._withObserversSuppressed(function(){if(0===t&&i===n.get("length"))n.replace(0,i),n.forEach(function(e){s._removeSortIndexObserverFor(e)});else for(var r=t;t+i>r;r++){var o=e.objectAt(r);n.removeObject(o),this._removeSortIndexObserverFor(o)}},this)},_sourceArrayDidChange:function(e,t,i,n){var s=this.get("content").slice();if(n>0){for(var r=t;t+n>r;r++){var o=e.objectAt(r);this._addSortIndexObserverAndRegisterForRemoval(o),s.push(o)}this._sortAndReplaceContent(s)}},_contentArrayWillChange:function(e,t,i){var n=this.get("source");this._withObserversSuppressed(function(){for(var s=t;t+i>s;s++){var r=e.objectAt(s);n.removeObject(r),this._removeSortIndexObserverFor(r)}},this)},_contentArrayDidChange:function(e,t,i,n){if(n>0){var s=this.get("sortKey"),r=this.get("source");this._withObserversSuppressed(function(){this._reAssignSortKeys(e,s);for(var i=t;t+n>i;i++){var o=e.objectAt(i);this._addSortIndexObserverAndRegisterForRemoval(o),r.pushObject(o)}},this)}},_reAssignSortKeys:function(e,t){var i=[];e.mapProperty(t).forEach(function(e,t){i.push(void 0===e&&0===t?0:void 0===e?i[t-1]:e)}),i.sort(function(e,t){return Ember.compare(e,t)}),e.forEach(function(e,n){Ember.set(e,t,i[n])})},_sortAndReplaceContent:function(e){var t=this.get("content");this._sort(e),this._withObserversSuppressed(function(){t.replace(0,t.get("length"),e)})},_sort:function(e){var t=this.get("sortKey");e.sort(function(e,i){return Ember.compare(Ember.get(e,t),Ember.get(i,t))})},_withObserversSuppressed:function(e,t){if(!this._suppressObservers){t||(t=this),this._suppressObservers=!0;try{e.call(t)}finally{this._suppressObservers=!1}}}})}(),function(){"use strict";Ember.mixin(Flame,{_setupStringMeasurement:function(e,t,i){e||(e=""),t||(t=""),i||(i="");var n=this._metricsCalculationElement;if(!n){var s=document.createElement("div");s.style.cssText="position:absolute; left:-10010px; top:-10px; width:10000px; visibility:hidden;",n=this._metricsCalculationElement=document.createElement("div"),s.appendChild(n),document.body.insertBefore(s,null)}return n.parentNode.className=e,n.className=t,n.style.cssText="position:absolute; left: 0; top: 0; bottom: auto; right: auto; width: auto; height: auto;"+i,n},measureString:function(e,t,i,n){var s,r=Handlebars.Utils.escapeExpression;s=Ember.isArray(e)?e.reduce(function(e,t){return e+r(t)+"<br>"},""):r(e);var o=this._setupStringMeasurement(t,i,n);return o.innerHTML=s,{width:o.clientWidth,height:o.clientHeight}}})}(),function(){"use strict";Flame.TableCell=function(e){this.value=null;for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])},Flame.TableCell.prototype.content=function(){return this.formattedValue()},Flame.TableCell.prototype.formattedValue=function(){return null===this.value?"":this.value},Flame.TableCell.prototype.editableValue=function(){throw new Error("Not implemented")},Flame.TableCell.prototype.validate=function(){return!0},Flame.TableCell.prototype.formatValueForBackend=function(){throw new Error("Not implemented")},Flame.TableCell.prototype.isEditable=function(){return!1},Flame.TableCell.prototype.isCopyable=function(){return!0},Flame.TableCell.prototype.isPastable=function(){return!0},Flame.TableCell.prototype.cssClasses=function(){return[]},Flame.TableCell.prototype.cssClassesString=function(){return this.cssClasses().join(" ")}}(),function(){"use strict";Flame.TableHeader=Ember.Object.extend({isClickable:!1,headerLabel:Ember.computed.alias("label"),isLeaf:Ember.computed.not("children"),createCell:function(){throw new Error("Not implemented")}})}(),function(){"use strict";Flame.TableSortSupport={sortAscendingCaption:"Sort ascending...",sortDescendingCaption:"Sort descending...",sortContent:function(){throw new Error("Not implemented!")},columnHeaderClicked:function(e,t){e.get("isLeaf")&&this._showSortMenu(e,this._sortMenuOptions(e),t)},_showSortMenu:function(e,t,i){Flame.MenuView.create({minWidth:i.outerWidth(),items:t,target:this,action:"sortContent",payload:Ember.computed.alias("value")}).popup(i)},_sortMenuOptions:function(e){return[{title:this.get("sortAscendingCaption"),value:{header:e,order:"asc"}},{title:this.get("sortDescendingCaption"),value:{header:e,order:"desc"}}]}}}(),function(){"use strict";Flame.TableViewContentAdapter=Ember.Object.extend({content:null,headers:function(){return this.get("content._headers")}.property("content._headers"),columnLeafs:function(){return this.get("content.columnLeafs")}.property("content.columnLeafs"),rowLeafs:function(){return this.get("content.rowLeafs")}.property("content.rowLeafs"),columnHeaderRows:function(){var e,t=[],i=this.get("headers"),n=i.columnHeaders,s=n.length;for(e=0;s>e;e++)this._processHeader(t,n[e],"columns",0,!1,e);for(t.maxDepth=Math.max.apply(Math,this.get("columnLeafs").mapProperty("depth")),e=0;e<this.get("columnLeafs").length;e++){var r=this.get("columnLeafs")[e];r.rowspan=t.maxDepth-r.depth+1}return t}.property("headers"),rowHeaderRows:function(){var e,t=[[]],i=this.get("headers"),n=i.rowHeaders,s=n.length;for(e=0;s>e;e++)this._processHeader(t,n[e],"rows",0,0===e,e);for(t.maxDepth=Math.max.apply(Math,this.get("rowLeafs").mapProperty("depth")),e=0;e<this.get("rowLeafs").length;e++){var r=this.get("rowLeafs")[e];r.colspan=t.maxDepth-r.depth+1}return t}.property("headers"),clear:function(){this._headers=null,this.propertyDidChange("headers")},_processHeader:function(e,t,i,n,s,r){t.depth=n+1,t.dataIndex=r,"columns"===i?(e[n]||(e[n]=[]),e[n].push(t)):"rows"===i&&(s||e.push([]),e[e.length-1].push(t));var o=0;if(t.hasOwnProperty("children"))for(var a=t.children,l=a.length,h=0;l>h;h++){var u=a[h];o+=this._processHeader(e,u,i,n+1,0===h,r)}else o=1;return"columns"===i?t.colspan=o:t.rowspan=o,o}})}(),function(){"use strict";function e(e){return function(){var t=arguments.length,i=Array(t+1);i[0]=e;for(var n=1;t+1>n;n++)i[n]=arguments[n-1];return this.invokeStateMethod.apply(this,i)}}Flame.State=Ember.Object.extend({gotoFlameState:function(e){this.get("owner").gotoFlameState(e)},normalizeTouchEvents:function(e){return e.touches||(e.touches=e.originalEvent.touches),e.pageX||(e.pageX=e.originalEvent.pageX),e.pageY||(e.pageY=e.originalEvent.pageY),e.screenX||(e.screenX=e.originalEvent.screenX),e.screenY||(e.screenY=e.originalEvent.screenY),e.clientX||(e.clientX=e.originalEvent.clientX),e.clientY||(e.clientY=e.originalEvent.clientY),e},$:function(){var e=this.get("owner");return e.$.apply(e,arguments)}}),Flame.State.reopenClass({gotoFlameState:function(e,t){return function(){return this.gotoFlameState(e),void 0===t?!0:t}}}),Flame.Statechart={initialFlameState:null,currentFlameState:void 0,init:function(){this._super();for(var e in this){var t=this[e];Flame.State.detect(t)&&(this[e]=t.create({owner:this,name:e}),this._setupProxyMethods(this[e]))}this.gotoFlameState(this.get("initialFlameState"))},_setupProxyMethods:function(t){for(var i in t)t.constructor.prototype.hasOwnProperty(i)&&"function"==typeof t[i]&&!this[i]&&"enterState"!==i&&"exitState"!==i&&(this[i]=e(i))},gotoFlameState:function(e){var t=this.get("currentFlameState"),i=this.get(e);if(t!==i){if(Ember.isNone(i)||!(i instanceof Flame.State))throw new Error("%@ is not a state!".fmt(e));Ember.isNone(t)||t.exitState&&t.exitState(),this.set("currentFlameState",i),i.enterState&&i.enterState()}},invokeStateMethod:function(e){for(var t=arguments.length,i=Array(t-1),n=1;t>n;n++)i[n-1]=arguments[n];var s=this.get("currentFlameState"),r=s[e];return"function"==typeof r?r.apply(s,i):"keyDown"===e?(i.unshift(e),!this._handleKeyEvent.apply(this,i)):void 0}}}(),function(){"use strict";Flame.TableController=Ember.Object.extend({dirtyCells:[],valuesOn:"column",isLoading:!1,tableDataBinding:"_data",headerDataBinding:"_headers",pushDataBatch:function(e){if(void 0!==e){var t=this.get("_headers");if(!t)throw new Error("Can't push data without first setting headers!");if(!this._dataBatchIsForCurrentTable(e))return;for(var i,n,s,r=this.get("dirtyCells").slice(),o=this.get("valuesOn"),a=this.get(o+"Leafs"),l=this.get("rowLeafs"),h=this.get("columnLeafs"),u=this.get("_data"),c=e.length,d=this.get("_indexFromPathMapping"),g=0;c>g;g++){if(i=e[g],n=d[i.path.row][i.path.column],i.rowHeaderParams=l[n[0]].params,i.columnHeaderParams=h[n[1]].params,i=a[n["row"===o?0:1]].createCell(i),s=u[n[0]][n[1]],s&&s.pending)for(var m in s.pending)i[m]=s.pending[m];u[n[0]][n[1]]=i,r.push(n)}this.set("dirtyCells",r)}},_dataBatchIsForCurrentTable:function(e){var t=e.length,i=this.get("_indexFromPathMapping");return t>0?i[e[0].path.row]&&i[e[t-1].path.row]:!1},_indexFromPathMapping:function(){var e,t,i,n,s,r={},o=this.get("rowLeafs"),a=o.length,l=this.get("columnLeafs"),h=l.length;for(e=0;a>e;e++)for(i=o[e],s=r[i.path]={},t=0;h>t;t++)n=l[t],s[n.path]=[e,t];return r}.property("rowLeafs","columnLeafs"),rowLeafs:function(){var e=this.get("_headers");return e?this._getLeafs(e.rowHeaders,[]):null}.property("_headers","_headers.columns"),columnLeafs:function(){var e=this.get("_headers");return e?this._getLeafs(e.columnHeaders,[]):null}.property("_headers","_headers.columns"),pathFromIndex:function(e){var t=this.get("rowLeafs"),i=this.get("columnLeafs");return{row:t[e[0]].path,column:i[e[1]].path}},indexFromPath:function(e){var t=this.get("_indexFromPathMapping");return t[e.row][e.column]},_getLeafs:function(e,t){var i,n,s=e.length,r=[];for(n=0;s>n;n++)if(i=e[n],i.hasOwnProperty("children")){var o=i.hasOwnProperty("id")?t.concat(i.id):t;r=r.concat(this._getLeafs(i.children,o))}else i.path=t.concat(i.id),r.push(i);for(n=0;n<r.length;n++)r[n].leafIndex=n;return r},_headersDidChange:function(){var e=this.get("_headers");if(!Ember.isNone(e)){var t=[];this.set("dirtyCells",[]);for(var i=this.get("rowLeafs").length,n=this.get("columnLeafs").length,s=0;i>s;s++){t.push([]);for(var r=0;n>r;r++)t[s].push(null)}this.set("_data",t)}}.observes("_headers")})}(),function(){"use strict";Flame.DataTableController=Flame.TableController.extend({headers:null,data:null,init:function(){this._super(),this._headersDidChange()},_headers:function(){var e=this.get("headers");return{rowHeaders:this._wrapHeaders(e.rowHeaders||[]),columnHeaders:this._wrapHeaders(e.columnHeaders||[])}}.property("headers"),_wrapHeaders:function(e){var t=this,i=this.get("headerClass");return e.map(function(e,n){var s=i.create({id:n},e),r=s.get("children");return r&&s.set("children",t._wrapHeaders(r)),s})},headerClass:function(){var e=this.get("cellClass");return Flame.TableHeader.extend({createCell:function(t){return new e({value:t.value})}})}.property(),cellClass:Flame.TableCell,_transformData:function(e){var t=[];return e.forEach(function(e,i){e.forEach(function(e,n){t.push({path:{row:[i],column:[n]},value:e})})}),t},_headersDidChange:function(){this._super();var e=this.get("data");e&&this.pushDataBatch(this._transformData(e))}.observes("headers")})}(),function(){"use strict";Flame.ArrayTableController=Flame.DataTableController.extend(Flame.TableSortSupport,{content:[],columns:[],headerProperty:null,rowHeadersClickable:!1,init:function(){this._super(),this._setContentObserver()},headers:function(){var e=this.get("headerProperty"),t=this.get("rowHeadersClickable"),i=this;return{rowHeaders:this.get("content").map(function(n){var s=n.get(e),r=function(){return function(e,t,n){n!==s&&i.refreshHeaders()}}();return i._setPropertyObserver(n,e,r),{isClickable:t,label:n.get(e),object:n}}),columnHeaders:this.get("columns").map(function(e){return{label:Ember.get(e,"label"),property:Ember.get(e,"property")}})}}.property("content.[]","columns","headerProperty","rowHeadersClickable"),data:function(){var e=this,t=this.get("columns");return this.get("content").map(function(i,n){return t.map(function(t,s){var r=Ember.get(t,"property"),o=function(){var i=Ember.get(t,"property");return function(t){e.pushDataBatch([{path:{row:[n],column:[s]},value:t.get(i)}])}}();return e._setPropertyObserver(i,r,o),Ember.get(i,Ember.get(t,"property"))})})}.property("headers"),_setPropertyObserver:function(e,t,i){var n=t+"DidChangeInArrayTableController";e.removeObserver(t,e,n),e[n]=i,e.addObserver(t,e,n)},_removePropertyObservers:function(e){var t=/(.+)DidChangeInArrayTableController$/;for(var i in e)if(e.hasOwnProperty(i)&&t.test(i)){var n=t.exec(i)[1];e.removeObserver(n,e,i),delete e[i]}},_contentArrayWillChange:function(e,t,i){for(var n=t+i,s=t;n>s;s++)this._removePropertyObservers(e.objectAt(s))},_setContentObserver:function(){var e=this.get("content");e&&e.addArrayObserver(this,{willChange:"_contentArrayWillChange",didChange:Ember.K})}.observes("content"),_removeContentObserver:function(){var e=this.get("content");e&&(e.removeArrayObserver(this,{willChange:"_contentArrayWillChange",didChange:Ember.K}),e.forEach(this._removePropertyObservers,this))}.observesBefore("content"),sortContent:function(e){var t=e.header.get("property"),i="desc"===e.order?-1:1,n=this.get("content").slice();n.sort(function(e,n){return i*Ember.compare(Ember.get(e,t),Ember.get(n,t))}),this.set("content",n)},refreshHeaders:function(){this.propertyWillChange("headers"),this.propertyDidChange("headers")}})}(),function(){"use strict";Flame.ActionSupport={target:null,action:null,payload:null,fireAction:function(e,t){var i=this.get("target")||this;for(this.beforeAction(this);"string"==typeof i;)i="."===i.charAt(0)?this.get(i.slice(1)):Ember.get(i);if(void 0===e&&(e=this.get("action")),e){var n="function"==typeof e?e:Ember.get(i,e);if(!n)throw new Error("Target %@ does not have action %@".fmt(i,e));var s=this,r=Ember.isNone(t)?this.get("payload"):t;Ember.isNone(r)&&(r=s);var o=function(){s.afterAction(s)};return n.call(i,r,e,this,o)}return!1},beforeAction:function(){},afterAction:function(){}}}(),function(){"use strict";var e={interpretKeyEvents:function(e){var t=e.shiftKey?Flame.MODIFIED_KEY_BINDINGS:Flame.KEY_BINDINGS,i=t[e.keyCode];if(i&&this[i]){var n=this[i];if("function"===Ember.typeOf(n))return n.call(this,e,this)}return!1},handleKeyEvent:function(e,t){var i=null;switch(e.type){case"keydown":i="keyDown";break;case"keypress":i="keyPress"}var n=i?this.get(i):null;return n?!n.call(Flame.keyResponderStack.current(),e,Flame.keyResponderStack.current()):this._handleKeyEvent(i,e,t)},_handleKeyEvent:function(e,t,i){if("keyDown"===e){var n=this.interpretKeyEvents(t);if(n===Flame.ALLOW_BROWSER_DEFAULT_HANDLING)return!0;if(n)return!1}return this.get("parentView")?this.get("parentView").handleKeyEvent(t,i):!0}};Ember.View.reopen(e),Ember.TextSupport.reopen(e),Flame.KEY_BINDINGS={8:"deleteBackward",9:"insertTab",13:"insertNewline",27:"cancel",32:"insertSpace",37:"moveLeft",38:"moveUp",39:"moveRight",40:"moveDown",46:"deleteForward"},Flame.MODIFIED_KEY_BINDINGS={8:"deleteForward",9:"insertBacktab",37:"moveLeftAndModifySelection",38:"moveUpAndModifySelection",39:"moveRightAndModifySelection",40:"moveDownAndModifySelection"},Flame.ALLOW_BROWSER_DEFAULT_HANDLING={},Ember.mixin(Flame,{mouseResponderView:void 0,keyResponderStack:Ember.Object.createWithMixins({_stack:[],currentKeyResponder:function(){return this.current()}.property().volatile(),current:function(){var e=this._stack.get("length");return e>0?this._stack.objectAt(e-1):void 0},push:function(e){return Ember.isNone(e)||(e.willBecomeKeyResponder&&e.willBecomeKeyResponder(),e.set&&!e.isDestroyed&&e.set("isFocused",!0),this._stack.push(e),e.didBecomeKeyResponder&&e.didBecomeKeyResponder(),this.propertyDidChange("currentKeyResponder")),e},pop:function(){if(this._stack.get("length")>0){var e=this.current();e&&e.willLoseKeyResponder&&e.willLoseKeyResponder();var t=this._stack.pop();return t.set&&!t.isDestroyed&&t.set("isFocused",!1),t.didLoseKeyResponder&&t.didLoseKeyResponder(),this.propertyDidChange("currentKeyResponder"),t}return void 0},replace:function(e){return this.current()!==e?(this.pop(),this.push(e)):void 0}})}),Ember.$(document).on("keydown.flame keypress.flame",null,function(e){return void 0!==Flame.keyResponderStack.current()&&Flame.keyResponderStack.current().get("isVisible")?Flame.keyResponderStack.current().handleKeyEvent(e,Flame.keyResponderStack.current()):!0}),Ember.$(window).on("mouseup",function(e){var t=Flame.get("mouseResponderView");return void 0!==t?"inDOM"!==t.get("_state")?!0:(Flame.set("mouseResponderView",void 0),!t.get("eventManager")._dispatch("mouseUp",e,t)):void 0}),Flame.EventManager={acceptsKeyResponder:!1,becomeKeyResponder:function(e){if(this.get("acceptsKeyResponder")===!1||this.get("isDisabled")){var t=this.get("parentView");if(t&&t.becomeKeyResponder)return t.becomeKeyResponder(e)}else void 0===e||e===!0?Flame.keyResponderStack.replace(this):Flame.keyResponderStack.push(this)},resignKeyResponder:function(){Flame.keyResponderStack.pop()},eventManager:{mouseDown:function(e,t){t.becomeKeyResponder(),Flame.set("mouseResponderView",void 0);var i=this._dispatch("mouseDown",e,t);return i&&Flame.set("mouseResponderView",i),!i},mouseUp:function(e,t){var i=Flame.get("mouseResponderView");if(void 0!==i){if("inDOM"!==i.get("_state"))return!0;t=i,Flame.set("mouseResponderView",void 0)}return!this._dispatch("mouseUp",e,t)},mouseMove:function(e,t){var i=Flame.get("mouseResponderView");if(void 0!==i){if("inDOM"!==i.get("_state"))return!0;t=i}return!this._dispatch("mouseMove",e,t)},doubleClick:function(e,t){return void 0!==Flame.get("mouseResponderView")&&(t=Flame.get("mouseResponderView")),!this._dispatch("doubleClick",e,t)},keyDown:function(e){return void 0!==Flame.keyResponderStack.current()&&Flame.keyResponderStack.current().get("isVisible")?Flame.keyResponderStack.current().handleKeyEvent(e,Flame.keyResponderStack.current()):!0},keyPress:function(e){return void 0!==Flame.keyResponderStack.current()&&Flame.keyResponderStack.current().get("isVisible")?Flame.keyResponderStack.current().handleKeyEvent(e,Flame.keyResponderStack.current()):!0},_dispatch:function(e,t,i){var n=i.get(e);if(n){var s=n.call(i,t,i);if(s===Flame.ALLOW_BROWSER_DEFAULT_HANDLING)return!1;if(s)return i}var r=i.get("parentView");return r?this._dispatch(e,t,r):!1}}}}(),function(){"use strict";Flame.FocusSupport={didBecomeKeyResponder:function(){var e=this.$();e&&e.focus()},didLoseKeyResponder:function(){var e=this.$();e&&e.blur()},focusIn:function(){Flame.keyResponderStack.current()!==this&&this.becomeKeyResponder()},focusOut:function(){Flame.keyResponderStack.current()===this&&document.hasFocus()&&this.resignKeyResponder()}}}(),function(){"use strict";Flame.LayoutSupport={useAbsolutePosition:!0,layout:{left:0,right:0,top:0,bottom:0},defaultWidth:void 0,defaultHeight:void 0,layoutManager:void 0,_layoutProperties:["left","right","top","bottom","width","height","maxHeight"],_cssProperties:["left","right","top","bottom","width","height","margin-left","margin-top","overflow"],_layoutChangeInProgress:!1,_layoutSupportInitialized:!1,_layoutObservers:null,init:function(){this.useAbsolutePosition&&(this.classNames=this.get("classNames").concat(["flame-view"])),this._super(),this._initLayoutSupport(),this.consultLayoutManager(),this.updateLayout()},willDestroy:function(){if(this._super(),this._layoutObservers)for(var e=this._layoutObservers.length,t=0;e>t;t++)this.removeObserver(this._layoutObservers[t])},didInsertElement:function(){this._super(),this.consultLayoutManager()},beforeRender:function(e){this._renderElementAttributes(e),this._super(e)},childViewsDidChange:function(){this._super.apply(this,arguments),this.consultLayoutManager()},_initLayoutSupport:function(){var e=Ember.Object.create(this.get("layout"));void 0===e.width&&void 0===e.right&&void 0!==this.get("defaultWidth")&&(e.width=this.get("defaultWidth")),void 0!==e.height||void 0!==e.top&&void 0!==e.bottom||void 0===this.get("defaultHeight")||(e.height=this.get("defaultHeight")),this.set("layout",e),this._layoutSupportInitialized=!0},_renderElementAttributes:function(e){if(this.get("useAbsolutePosition")){var t=this.get("layout")||{};this._resolveLayoutBindings(t),this._translateLayout(t,e),void 0!==t.zIndex&&e.style("z-index",t.zIndex);var i=this.get("backgroundColor");void 0!==i&&e.style("background-color",i)}},_resolveLayoutBindings:function(e){if(!e._bindingsResolved){var t=function(e,t){return function(){this.adjustLayout(e,this.get(t))}};this._layoutObservers=[];for(var i=this._layoutProperties.length,n=0;i>n;n++){var s=this._layoutProperties[n],r=e[s];"string"==typeof r&&""!==r&&isNaN(parseInt(r,10))&&(this.addObserver(r,this,t(s,r)),this._layoutObservers.push(r),e[s]=this.get(r))}e._bindingsResolved=!0}},_translateLayout:function(e,t){var i={};void 0!==e.maxHeight&&(i.overflow="auto"),e.overflow&&(i.overflow=e.overflow),i.width=e.width,void 0===e.centerX?(i.left=e.left,i.right=e.right):(i.left="50%",i["margin-left"]=-((e.width||0)/2)+e.centerX+"px"),i.height=e.height,void 0===e.centerY?(i.top=e.top,i.bottom=e.bottom):(i.top="50%",i["margin-top"]=-((e.height||0)/2)+e.centerY+"px");var n,s=this._cssProperties.length;for(n=0;s>n;n++){var r=this._cssProperties[n],o=i[r];void 0===o||"number"!=typeof o&&parseInt(o,10).toString()!==o||(i[r]=o+="px"),t&&!Ember.isNone(o)&&t.style(r,o)}return i},consultLayoutManager:function(){if(this._layoutSupportInitialized){var e=this.get("layoutManager");e&&(this._layoutChangeInProgress||(this._layoutChangeInProgress=!0,e.setupLayout(this),this._layoutChangeInProgress=!1))}},layoutDidChangeFor:function(){this.consultLayoutManager()},adjustLayout:function(e,t,i){var n,s=this.get("layout"),r=s[e];if(void 0!==t)n=t;else{if(void 0===i)throw new Error("Give either a new value or an increment!");n=r+i}r!==n&&(s[e]=n,this.updateLayout(),"maxHeight"===e&&this.consultLayoutManager())},updateLayout:function(){if(this.get("useAbsolutePosition")){var e=this._translateLayout(this.get("layout")||{}),t=this.get("element");t&&jQuery(t).css(e)}var i=this.get("parentView");i&&i.layoutDidChangeFor&&i.layoutDidChangeFor(this)}.observes("isVisible","layout"),isVisible:!0}}(),function(){"use strict";Flame.ViewSupport={concatenatedProperties:["displayProperties"],displayProperties:[],resetClassNames:!1,init:function(){this._super();for(var e=this.get("displayProperties")||[],t=e.length,i=0;t>i;i++){var n=e[i];this.addObserver(n,this,this.rerender)}if(this.get("resetClassNames")&&Object.getPrototypeOf){var s=this._collectSuperClassNames(),r=this.get("classNames").removeObjects(s);this.set("classNames",r)}},willDestroy:function(){this._super();for(var e=this.get("displayProperties")||[],t=e.length,i=0;t>i;i++)this.removeObserver(e[i])},createChildView:function(e,t){return e=this._super(e,t),e instanceof Ember.View&&Flame._bindPrefixedBindings(e)&&Ember.finishChains(e),e},_collectSuperClassNames:function(){for(var e=[],t=Object.getPrototypeOf(Object.getPrototypeOf(this));t&&t.constructor!==Flame.View;)e.pushObjects(t.classNames||[]),t=Object.getPrototypeOf(t);return t.constructor===Flame.View&&e.removeObjects(t.classNames),e}}}(),function(){"use strict";Flame.LayoutManager=Ember.Object.extend({setupLayout:void 0})}(),function(){"use strict";Flame.VerticalStackLayoutManager=Flame.LayoutManager.extend({topMargin:0,bottomMargin:0,spacing:0,setupLayout:function(e){{var t=this.get("topMargin"),i=!1,n=e.get("layout.maxHeight"),s=e.toArray().filter(function(e){return e.get("ignoreLayoutManager")!==!0&&(e.get("isVisible")||null===e.get("isVisible"))&&e.get("layout")});s.get("length")}s.forEach(function(e,n){n>0&&(t+=this.get("spacing"));var s=e.get("layout");e._resolveLayoutBindings(s),t+=s.topMargin||0,e.adjustLayout("top",t),t+=(s.topPadding||0)+(s.bottomPadding||0);var r=s.height;"string"==typeof r&&(r=parseInt(r,10)),Ember.isNone(s.height)?i=!0:t+=r},this),i||(t+=this.get("bottomMargin")),void 0!==n&&t>n&&(t=n),i&&void 0===n||e.adjustLayout("height",t)}})}(),function(){"use strict";Ember.View.reopen({firstDescendantWithProperty:function(e){var t;return this.forEachChildView(function(i){i instanceof Ember.View&&void 0===t&&(t=i.get(e)?i:i.firstDescendantWithProperty(e))}),t}}),Flame.reopen({ALIGN_LEFT:"align-left",ALIGN_RIGHT:"align-right",ALIGN_CENTER:"align-center",FOCUS_RING_MARGIN:3}),Flame.View=Ember.ContainerView.extend(Flame.ViewSupport,Flame.LayoutSupport,Flame.EventManager,{isFocused:!1,init:function(){var e=this.get("childViews");if(!e)return void this._super();for(var t,i=e.length,n=0,s=0;i>s;s++){var r=e[s];if(r.indexOf(":")>-1){t=t||e.slice(0);var o=r.split(":");this.get(o[0])?t[s-n]=o[1]:(t.splice(s-n,1),n++)}}t&&this.set("childViews",t),this._super()},render:function(e){var t=Ember.get,i=this.get("template");if(i){var n,s=t(this,"context"),r=this.cloneKeywords(),o={view:this,buffer:e,isRenderData:!0,keywords:r,insideGroup:t(this,"templateData.insideGroup")};n=i(s,{data:o}),void 0!==n&&e.push(n)}else this._super(e)},removeChild:function(e){return this.get("template")?Ember.View.prototype.removeChild.call(this,e):this._super(e)},template:function(){var e=this.get("handlebars");if(e)return this._compileTemplate(e);var t=this.get("templateName"),i=this.templateForName(t,"template");return i||null}.property("templateName","handlebars"),_compileTemplate:function(e){var t=Flame._templateCache[e];return t||(Flame._templateCache[e]=t=Ember.Handlebars.compile(e)),t}}),Flame._templateCache={}}(),function(){"use strict";Flame.ImageView=Flame.View.extend({handlebars:'<img {{bind-attr src="view.value"}}>'})}(),function(){"use strict";Flame.LabelView=Flame.View.extend(Flame.ActionSupport,{layout:{left:0,top:0},classNames:["flame-label-view"],classNameBindings:["textAlign","isSelectable","isDisabled"],defaultHeight:22,defaultWidth:200,isSelectable:!1,isDisabled:!1,allowWrapping:!1,handlebars:"{{view.value}}",beforeRender:function(e){var t=this.get("layout.height");!this.get("useAbsolutePosition")||Ember.isNone(t)||this.get("allowWrapping")||e.style("line-height",t+"px"),this._super(e)},mouseDown:function(){return this.fireAction()},mouseUp:function(){return!0},touchStart:function(){return this.fireAction()},touchEnd:function(){return!0}}),Flame.LabelView.reopenClass({label:function(e,t,i,n,s){return Flame.LabelView.extend({layout:{left:t,top:i,width:n,height:s},value:e})}})}(),function(){"use strict";Flame._zIndexCounter=100,Flame.reopen({POSITION_BELOW:1,POSITION_RIGHT:2,POSITION_LEFT:4,POSITION_ABOVE:8,POSITION_MIDDLE:16}),Flame.Panel=Flame.View.extend({classNames:["flame-panel"],childViews:["titleView","contentView","resizeView"],destroyOnClose:!0,acceptsKeyResponder:!0,isModal:!0,allowClosingByClickingOutside:!0,allowClosingByCancelButton:!1,allowMoving:!1,dimBackground:!0,title:null,isShown:!1,isResizable:!1,minHeight:52,minWidth:100,layoutPersistenceKey:null,init:function(){this._super()},titleView:Flame.View.extend(Flame.Statechart,{layout:{left:0,right:0,height:"height",bottomPadding:1},classNames:["flame-panel-title"],isVisible:Ember.computed.notEqual("parentView.title",null),initialFlameState:"idle",childViews:["headerView"],height:function(){return this.get("parentView.headerView.height")||26}.property("parentView.headerView.height"),headerView:function(){return this.get("parentView.headerView")||this.get("labelView")}.property("parentView.headerView"),labelView:Flame.LabelView.extend({layout:{left:4,right:4,top:2},textAlign:Flame.ALIGN_CENTER,value:Ember.computed.alias("parentView.parentView.title")}),idle:Flame.State.extend({mouseDown:function(e){var t=this.get("owner");if(!t.get("parentView.allowMoving"))return!0;t._pageX=e.pageX,t._pageY=e.pageY;var i=t.get("parentView").$().offset();
return t._panelX=i.left,t._panelY=i.top,this.gotoFlameState("moving"),!0},touchStart:function(e){return this.mouseDown(this.normalizeTouchEvents(e)),!0}}),moving:Flame.State.extend({enterState:function(){this.element=this.get("owner.parentView").$(),this.windowHeight=jQuery(window).height(),this.windowWidth=jQuery(window).width(),this.elementWidth=this.element.outerWidth(),this.elementHeight=this.element.outerHeight()},mouseMove:function(e){var t=this.get("owner"),i=t._panelX+(e.pageX-t._pageX),n=t._panelY+(e.pageY-t._pageY);return this.newX=Math.max(5,Math.min(i,this.windowWidth-this.elementWidth-5)),this.newY=Math.max(5,Math.min(n,this.windowHeight-this.elementHeight-5)),this.element.css({left:this.newX,top:this.newY,right:"",bottom:"",marginLeft:"",marginTop:""}),!0},touchMove:function(e){return e.preventDefault(),this.mouseMove(this.normalizeTouchEvents(e)),!0},mouseUp:Flame.State.gotoFlameState("idle"),touchEnd:Flame.State.gotoFlameState("idle"),exitState:function(){var e=this.get("owner").nearestOfType(Flame.Panel).get("layoutPersistenceKey");if(e){var t=JSON.parse(localStorage.getItem("panelLayouts"))||{};t[e]={position:{left:this.newX,top:this.newY}},localStorage.setItem("panelLayouts",JSON.stringify(t))}}})}),resizeView:Flame.View.extend(Flame.Statechart,{layout:{bottom:3,right:3,height:16,width:16},ignoreLayoutManager:!0,classNames:["flame-resize-thumb"],isVisible:Ember.computed.alias("parentView.isResizable"),initialFlameState:"idle",isResizing:!1,idle:Flame.State.extend({enterState:function(){this.set("owner.isResizing",!1)},mouseDown:function(e){var t=this.get("owner"),i=t.get("parentView").$();return t.get("parentView.isResizable")?(t._pageX=e.pageX,t._pageY=e.pageY,t._startW=i.outerWidth(),t._startH=i.outerHeight(),this.gotoFlameState("resizing"),!0):!0},touchStart:function(e){return this.mouseDown(this.normalizeTouchEvents(e)),!0}}),resizing:Flame.State.extend({enterState:function(){this.set("owner.isResizing",!0)},mouseMove:function(e){var t=this.get("owner"),i=t.get("parentView"),n=t._startW+(e.pageX-t._pageX),s=t._startH+(e.pageY-t._pageY);return n=Math.max(i.get("minWidth"),n),s=Math.max(i.get("minHeight"),s),i.$().css({width:n,height:s}),!0},touchMove:function(e){return e.preventDefault(),this.mouseMove(this.normalizeTouchEvents(e)),!0},mouseUp:Flame.State.gotoFlameState("idle"),touchEnd:Flame.State.gotoFlameState("idle")})}),modalPane:function(){return Flame.View.create({layout:{left:0,top:0,right:0,bottom:0},classNames:["flame-modal-pane"],classNameBindings:["parentPanel.dimBackground"],parentPanel:null,mouseDown:function(){return this.get("parentPanel.allowClosingByClickingOutside")&&this.get("parentPanel").close(),!0},touchStart:function(){return this.get("parentPanel.allowClosingByClickingOutside")&&this.get("parentPanel").close(),!0}})}.property().volatile(),insertNewline:function(){var e=this.firstDescendantWithProperty("isDefault");return e&&e.simulateClick&&e.simulateClick(),!0},cancel:function(){return this.get("allowClosingByCancelButton")&&this.close(),!0},_getDimensionsForAnchorElement:function(e){return e.closest("svg").length>0?{height:e[0].getBBox().height,width:e[0].getBBox().width}:{height:e.outerHeight(),width:e.outerWidth()}},_layoutRelativeTo:function(e,t){t=t||Flame.POSITION_BELOW;var i=this.get("layout"),n=e instanceof jQuery?e:e.$(),s=n.offset(),r=this.objectAt(0);!(r&&r.get("layout")&&r.get("layout").height)||i&&i.height||(i.height=r.get("layout").height);var o=this._getDimensionsForAnchorElement(n);t&(Flame.POSITION_BELOW|Flame.POSITION_ABOVE)?(i.top=s.top+(t&Flame.POSITION_BELOW?o.height:-i.height),i.left=s.left,t&Flame.POSITION_MIDDLE&&(i.left=i.left-i.width/2+o.width/2)):t&(Flame.POSITION_RIGHT|Flame.POSITION_LEFT)&&(i.top=s.top,i.left=s.left+(t&Flame.POSITION_RIGHT?o.width:-i.width),t&Flame.POSITION_MIDDLE&&(i.top=i.top-i.height/2+o.height/2));var a=Ember.$(window),l=a.width();return i.left+i.width>l-10&&(i.left=l-i.width-10,i.movedX=!0),t&Flame.POSITION_BELOW&&i.top+i.height>a.height()-10&&s.top-i.height>=0||t&Flame.POSITION_ABOVE&&i.top<0?i.movedY=!0:i.top<0&&(i.top=10),i},popup:function(e,t){if(!this.get("isShown")){if(this.get("isModal")){var i=this.get("modalPane");i.set("parentPanel",this),i.get("layout").zIndex=Flame._zIndexCounter,Ember.run(function(){i.append()}),this.set("_modalPane",i)}e&&this.set("layout",this._layoutRelativeTo(e,t)),this.get("layout").zIndex=Flame._zIndexCounter+10,Flame._zIndexCounter+=100,this.append(),this.set("isShown",!0),this.set("isVisible",!0),this.get("acceptsKeyResponder")&&this.becomeKeyResponder(!1);var n=this.get("layoutPersistenceKey");if(n){var s=JSON.parse(localStorage.getItem("panelLayouts"))||{};if(s[n]){var r=this.get("layout");r.top=s[n].position.top,r.left=s[n].position.left,r.centerX=void 0,r.centerY=void 0}}Ember.run.scheduleOnce("afterRender",this,this._focusDefaultInput)}},close:function(){this.isDestroyed||this.get("isShown")&&(this.get("isModal")&&(this.get("_modalPane").remove(),this.get("_modalPane").destroy()),this.remove(),this.set("isShown",!1),this.set("isVisible",!1),this.get("acceptsKeyResponder")&&this.resignKeyResponder(),Flame._zIndexCounter-=100,this.get("destroyOnClose")&&this.destroy())},_focusDefaultInput:function(){var e=this.firstDescendantWithProperty("isDefaultFocus");e&&e.becomeKeyResponder()}})}(),function(){"use strict";Flame.ButtonView=Flame.View.extend(Flame.ActionSupport,Flame.Statechart,{defaultHeight:24,classNames:["flame-button-view"],classNameBindings:["isHovered","isActive","isSelected","isDisabled","isDefault","isFocused"],acceptsKeyResponder:!0,isHovered:!1,isActive:!1,isSelected:!1,isDisabled:!1,isDefault:!1,isSticky:!1,initialFlameState:"idle",handlebars:'<label class="flame-button-label">{{view.title}}</label>',beforeRender:function(e){var t=this.get("layout.height");this.get("useAbsolutePosition")&&!Ember.isNone(t)&&e.style("line-height",t-2+"px"),this._super(e)},insertSpace:function(){return this.simulateClick(),!0},idle:Flame.State.extend({mouseEnter:function(){return this.gotoFlameState("hover"),!0},touchStart:function(){return this.gotoFlameState("mouseDownInside"),!0},simulateClick:function(){this.gotoFlameState("hover"),this.get("owner").mouseDown(),Ember.run.later(this.get("owner"),function(){this.mouseUp(),this.mouseLeave()},150)}}),hover:Flame.State.extend({mouseLeave:function(){return this.gotoFlameState("idle"),!0},mouseDown:function(){return this.get("owner.isDisabled")||this.gotoFlameState("mouseDownInside"),!0},simulateClick:function(){this.mouseDown(),Ember.run.later(this.get("owner"),"mouseUp",100)},enterState:function(){this.get("owner").set("isHovered",!0)},exitState:function(){var e=this.get("owner");e.isDestroyed||e.set("isHovered",!1)}}),mouseDownInside:Flame.State.extend({_handleClick:function(){var e=this.get("owner");e.fireAction(),e.get("isSticky")&&e.toggleProperty("isSelected")},mouseUp:function(){return this._handleClick(),this.gotoFlameState("hover"),!0},touchEnd:function(){return this._handleClick(),this.gotoFlameState("idle"),!0},mouseLeave:function(){return this.gotoFlameState("mouseDownOutside"),!0},enterState:function(){this.get("owner").set("isActive",!0)},exitState:function(){this.get("owner").set("isActive",!1)}}),mouseDownOutside:Flame.State.extend({mouseUp:function(){return this.gotoFlameState("idle"),!0},mouseEnter:function(){return this.gotoFlameState("mouseDownInside"),!0}})})}(),function(){"use strict";var e=Ember.computed.alias,t=Flame.computed.nearest;Flame.AlertPanel=Flame.Panel.extend(),Flame.AlertPanel.INFO_ICON=Flame.image("info_icon.svg"),Flame.AlertPanel.WARN_ICON=Flame.image("warn_icon.svg"),Flame.AlertPanel.ERROR_ICON=Flame.image("error_icon.svg"),Flame.AlertPanelButtonView=Flame.View.extend({layout:{width:"100%",right:0,height:30},childViews:["cancelButtonView","confirmButtonView"],cancelButtonTitle:"Cancel",confirmButtonTitle:"OK",isCancelVisible:!0,isConfirmVisible:!0,isCancelDisabled:!1,isConfirmDisabled:!1,alertPanelView:null,cancelButtonView:Flame.ButtonView.extend({layout:{width:90,bottom:2,right:110},title:e("parentView.cancelButtonTitle"),isVisible:e("parentView.isCancelVisible"),isDisabled:e("parentView.isCancelDisabled"),action:function(){this.get("parentView.alertPanelView").onCancel()}}),confirmButtonView:Flame.ButtonView.extend({layout:{width:90,bottom:2,right:2},title:e("parentView.confirmButtonTitle"),isVisible:e("parentView.isConfirmVisible"),isDisabled:e("parentView.isConfirmDisabled"),isDefault:!0,action:function(){this.get("parentView.alertPanelView").onConfirm()}})}),Flame.AlertPanelMessageView=Flame.View.extend({layout:{left:10,right:2,height:"measuredHeight"},childViews:["iconView","messageView"],messageViewWidth:0,measuredHeight:function(){var e="width: %@px;".fmt(this.get("messageViewWidth")),t=this.nearestOfType(Flame.AlertPanel).get("classNames").join(" "),i=this.get("messageView.classNames").join(" "),n=Flame.measureString(this.get("message"),t,i,e).height;return Math.max(Math.min(n,600),50)}.property("message","messageViewWidth"),message:null,iconView:Flame.ImageView.extend({layout:{left:10},value:t("icon")}),messageView:Flame.LabelView.extend({layout:{left:75,right:2,height:null},didInsertElement:function(){this.set("parentView.messageViewWidth",this.$().width())},allowWrapping:!0,value:e("parentView.message")})}),Flame.AlertPanel.reopen({layout:{centerX:0,centerY:-50,width:400},layoutManager:Flame.VerticalStackLayoutManager.create(),classNames:["flame-alert-panel"],icon:Flame.AlertPanel.INFO_ICON,isModal:!0,allowClosingByClickingOutside:!1,allowMoving:!0,isCancelVisible:!0,isConfirmVisible:!0,isCloseable:!0,title:"",message:"",confirmButtonTitle:"OK",cancelButtonTitle:"Cancel",contentView:Flame.View.extend({layout:{left:15,right:15,top:36,bottom:15},layoutManager:Flame.VerticalStackLayoutManager.create({topMargin:20,bottomMargin:17,spacing:10}),childViews:["messageView","buttonView"],messageView:Flame.AlertPanelMessageView.extend({message:t("message")}),buttonView:Flame.AlertPanelButtonView.extend({confirmButtonTitle:t("confirmButtonTitle"),cancelButtonTitle:t("cancelButtonTitle"),alertPanelView:e("parentView.parentView"),isCancelVisible:t("isCancelVisible"),isConfirmVisible:t("isConfirmVisible")})}),cancel:function(){this.onCancel()},onConfirm:function(){this.get("isCloseable")&&this.close()},onCancel:function(){this.get("isCloseable")&&this.close()}}),Flame.AlertPanel.reopenClass({info:function(e){return e=jQuery.extend(e||{},{icon:Flame.AlertPanel.INFO_ICON,isCancelVisible:!1}),this.createWithMixins(e)},warn:function(e){return e=jQuery.extend(e||{},{icon:Flame.AlertPanel.WARN_ICON}),this.createWithMixins(e)},error:function(e){return e=jQuery.extend(e||{},{icon:Flame.AlertPanel.ERROR_ICON}),this.createWithMixins(e)}})}(),function(){"use strict";Flame.CollectionView=Ember.CollectionView.extend(Flame.ViewSupport,Flame.LayoutSupport,Flame.EventManager,{classNames:["flame-collection-view"]})}(),function(){"use strict";Flame.MenuScrollViewButton=Flame.View.extend({classNames:["scroll-element"],classNameBindings:["directionClass","isShown"],directionClass:function(){return"scroll-%@".fmt(this.get("direction"))}.property().volatile(),isShown:!1,direction:"down",useAbsolutePosition:!0,mouseLeave:function(){return this.get("isShown")?(this.get("parentView").stopScrolling(),!0):!1},mouseEnter:function(){return this.get("isShown")?(this.get("parentView").startScrolling("up"===this.get("direction")?-1:1),!0):!1},mouseDown:function(){return!0},mouseUp:function(){return!0}}),Flame.MenuScrollView=Flame.View.extend({classNames:["menu-scroll-view"],needScrolling:!1,scrollDirection:0,scrollPosition:"top",childViews:["upArrow","viewPort","downArrow"],scrollSize:10,viewPort:Flame.View.extend({classNames:["scroll-view-viewport"]}),upArrow:Flame.MenuScrollViewButton.extend({direction:"up",layout:{height:20,top:0,width:"100%"}}),downArrow:Flame.MenuScrollViewButton.extend({direction:"down",layout:{height:20,bottom:0,width:"100%"}}),willDestroyElement:function(){this._super(),this.stopScrolling()},setScrolledView:function(e){this.get("viewPort").replace(0,1,[e])},scrollPositionDidChange:function(){var e=this.get("upArrow"),t=this.get("downArrow"),i=this.get("scrollPosition");e.set("isShown",this.get("needScrolling")&&"top"!==i),t.set("isShown",this.get("needScrolling")&&"bottom"!==i)}.observes("scrollPosition","needScrolling"),startScrolling:function(e){this.set("scrollDirection",e),this.scroll()},stopScrolling:function(){this.set("scrollDirection",0),this._timer&&Ember.run.cancel(this._timer)},_recalculateSizes:function(){var e=this.get("parentView.layout.height");if(e>0){var t=12;this.set("layout",{height:e-t,width:"100%"});var i=this.get("viewPort");i&&i.set("layout",{height:e-t,top:0,width:"100%"})}}.observes("parentView.layout","needScrolling"),_scrollTo:function(e){var t=this.get("viewPort").$();t.scrollTop(e)},scroll:function(){var e=this.get("scrollDirection"),t=20,i=this.get("scrollSize"),n=this.get("viewPort").$(),s=n.scrollTop(),r=n.height(),o=!0,a=this.get("scrollPosition"),l=i;if(-1===e)l>s&&(l=s,o=!1);else if(1===e){var h=this.get("viewPort.firstObject").$().outerHeight(),u=s+r;u+l>=h&&(l=h-u,o=!1)}l*=e,this._scrollTo(s+l,.9*t*Math.abs(l/i)),o?(this._timer=Ember.run.later(this,this.scroll,t),a="middle"):(1===e?a="bottom":-1===e&&(a="top"),this.stopScrolling()),this.set("scrollPosition",a)}})}(),function(){"use strict";Flame.MenuItem=function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])},Flame.MenuItem.prototype.renderToBuffer=function(e){var t=["flame-view","flame-list-item-view","flame-menu-item-view"];this.isSelected&&t.push("is-selected"),this.isEnabled()||t.push("is-disabled");var i=Ember.isNone(this.subMenuItems)?-1:this.subMenuItems.get("length"),n='<div id="%@" class="%@" %@>%@%@%@</div>';e.push(n.fmt(this.id,t.join(" "),this.item.tooltip?'title="%@"'.fmt(this.item.tooltip):"",this.isChecked?'<div class="flame-menu-item-view-checkmark"></div>':"",Handlebars.Utils.escapeExpression(this.title),i>0?'<div class="menu-indicator"></div>':""))},Flame.MenuItem.prototype.isEnabled=function(){return!(this.isDisabled||this.subMenuItems&&0===this.subMenuItems.length)},Flame.MenuItem.prototype.isSelectable=function(){return this.isEnabled()&&!this.subMenuItems},Flame.MenuItem.prototype.$=function(){return Ember.$("#%@".fmt(this.id))},Flame.MenuItem.prototype.closeSubMenu=function(){var e=this.subMenuView;Ember.isNone(e)||(e.close(),this.subMenuView=null)},Flame.MenuView=Flame.Panel.extend(Flame.ActionSupport,{classNames:["flame-menu"],childViews:["contentView"],contentView:Flame.MenuScrollView,dimBackground:!1,allowClosingByCancelButton:!0,subMenuKey:"subMenu",itemTitleKey:"title",itemEnabledKey:"isEnabled",itemCheckedKey:"isChecked",itemValueKey:"value",itemActionKey:"action",itemHeight:21,menuMargin:12,minWidth:null,items:null,parentMenu:null,value:null,_allItemsDoNotFit:!0,_anchorElement:null,_menuItems:null,_highlightIndex:-1,_userHighlightIndex:-1,_internalSelection:{isSet:!1,value:null},init:function(){this._super(),this._needToRecreateItems()},_calculateMenuWidth:function(){var e=this.get("items")||[];if(0!==Ember.get(e,"length")){var t=this.get("itemTitleKey"),i=e.map(function(e){return Ember.get(e,t)});return Flame.measureString(i,"ember-view flame-view flame-list-item-view flame-menu-item-view","title").width+16+18}},_createMenuItems:function(){var e,t=this.get("items"),i=this.get("itemCheckedKey"),n=this.get("itemEnabledKey"),s=this.get("itemTitleKey"),r=this.get("itemValueKey"),o=this.get("subMenuKey"),a=this.get("value"),l=!Ember.isNone(a);return e=(t||[]).map(function(e,t){return new Flame.MenuItem({item:e,isSelected:l?Ember.get(e,r)===a:!1,isDisabled:Ember.get(e,n)===!1,isChecked:Ember.get(e,i),subMenuItems:Ember.get(e,o),title:Ember.get(e,s),id:this._indexToId(t)})},this)},_needToRecreateItems:function(){var e=this._createMenuItems();this.set("_menuItems",e),Ember.isNone(this.get("parentMenu"))&&e.forEach(function(e,t){e.isSelected&&this.set("_highlightIndex",t)},this),this.get("contentView").setScrolledView(this._createMenuView()),this.get("_anchorElement")&&this._updateMenuSize()}.observes("items"),_createMenuView:function(){var e=this.get("_menuItems");return Flame.View.create({useAbsolutePosition:!1,render:function(t){e.forEach(function(e){e.renderToBuffer(t)})}})},makeSelection:function(){var e,t,i=this.get("parentMenu");if(Ember.isNone(i)){var n=this.get("_internalSelection");n.isSet&&(t=Ember.get(n.value,this.get("itemValueKey")),this.set("value",t),e=Ember.get(n.value,this.get("itemActionKey"))||this.get("action")),Ember.run.sync(),this.close(),Ember.isNone(e)||this.fireAction(e,t)}else i.makeSelection(),this.close()},subMenu:function(){return Flame.MenuView.extend({isModal:!1,popup:function(e,t){if(!this.get("layout.width")){var i=Math.max(this.get("minWidth")||0,this._calculateMenuWidth());this.set("layout.width",i)}this._super(e,t)},_layoutRelativeTo:function(e,t){var i=this._super(e,t);return this.get("subMenuPosition")===Flame.POSITION_LEFT?i:(i.movedX&&(this.set("subMenuPosition",Flame.POSITION_LEFT),i=this._super(e,Flame.POSITION_LEFT)),i)}})}.property(),createSubMenu:function(e){return this.get("subMenu").create({items:e,parentMenu:this,subMenuKey:this.get("subMenuKey"),itemEnabledKey:this.get("itemEnabledKey"),itemTitleKey:this.get("itemTitleKey"),itemValueKey:this.get("itemValueKey"),itemHeight:this.get("itemHeight"),subMenuPosition:this.get("subMenuPosition")})},closeCurrentlyOpenSubMenu:function(){var e=this.get("_highlightIndex");e>=0&&this.get("_menuItems").objectAt(e).closeSubMenu()},popup:function(e,t){Ember.isNone(this.get("parentMenu"))&&(this._openedAt=(new Date).getTime());var i=e instanceof jQuery?e:e.$();this._super(i,t),this.set("_anchorElement",i),this._updateMenuSize()},_updateMenuSize:function(){var e=this.get("_anchorElement"),t=5,i=5,n=1,s=t+i,r=this.get("menuMargin"),o=this.get("_menuItems").get("length")*this.get("itemHeight")+s+2*n,a=$(window).height(),l=e.offset().top,h=e.outerHeight(),u=this.get("layout"),c=!Ember.isNone(this.get("parentMenu")),d=a-l+(c?n+t:-h),g=!1;if(a>=o+2*r?c&&d>=o+r?u.set("top",l-(n+t)):o+r>d&&u.set("top",a-(o+r)):(o=a-2*r,u.set("top",r),g=!0),u.set("height",o),!u.width){var m=Math.max(this.get("minWidth")||0,this._calculateMenuWidth());u.set("width",m)}this.notifyPropertyChange("layout"),this.set("contentView.needScrolling",g)},close:function(){this.isDestroyed||(this.set("_highlightIndex",-1),this._clearKeySearch(),this._super())},mouseDown:function(){return!0},cancel:function(){var e=this.get("parentMenu");return Ember.isNone(e)?this._super():(e.closeCurrentlyOpenSubMenu(),!0)},moveUp:function(){return this._selectNext(-1)},moveDown:function(){return this._selectNext(1)},moveRight:function(){return this._tryOpenSubmenu(!0),!0},moveLeft:function(){var e=this.get("parentMenu");return Ember.isNone(e)||e.closeCurrentlyOpenSubMenu(),!0},insertNewline:function(){return this.makeSelection(),!0},keyPress:function(e){var t=String.fromCharCode(e.which);return e.which>31&&""!==t?(this._doKeySearch(t),!0):!1},handleMouseEvents:function(e){var t=this._idToIndex(e.currentTarget.id),i=!1;return"mouseenter"===e.type?i=this.mouseEntered(t):"mouseup"===e.type?i=this.mouseClicked(t):"mousedown"===e.type&&(i=!0),!i},mouseClicked:function(e){return Ember.isNone(this.get("parentMenu"))&&(new Date).getTime()-this._openedAt<300?void 0:(this.set("_highlightIndex",e),this.get("_userHighlightIndex")>=0&&this.makeSelection(),!0)},mouseEntered:function(e){return this.set("_userHighlightIndex",e),this._tryOpenSubmenu(!1),!0},_selectNext:function(e){for(var t,i=this.get("_menuItems"),n=i.get("length"),s=this.get("_highlightIndex")+e;s>=0&&n>s;s+=e)if(t=i.objectAt(s),t.isEnabled()){this.set("_highlightIndex",s);break}return this._clearKeySearch(),!0},_valueDidChange:function(){var e=this.get("value"),t=this.get("itemValueKey");if(!Ember.isNone(e)&&!Ember.isNone(t)){var i=this._findIndex(function(i){return Ember.get(i,t)===e});i>=0&&this.set("_highlightIndex",i)}}.observes("value"),_internalSelectionDidChange:function(){var e=this.get("_internalSelection");Ember.trySet(this,"parentMenu._internalSelection",e)}.observes("_internalSelection"),_findIndex:function(e){for(var t=this.get("items"),i=0,n=t.get("length");n>i;i++)if(e(t.objectAt(i)))return i;return-1},_findByName:function(e){var t=new RegExp("^"+e.replace(/[\^$*+?.(){}\[\]|]/g,"\\$&"),"i"),i=this.get("itemTitleKey");return this._findIndex(function(e){return t.test(Ember.get(e,i))})},_toggleClass:function(e,t,i){var n=this.get("_menuItems").objectAt(t);n.$().toggleClass(e,i)},_highlightWillChange:function(){var e=this.get("_highlightIndex"),t=this.get("_menuItems").objectAt(e);Ember.isNone(t)||(this._toggleClass("is-selected",e),t.isSelected=!1,t.closeSubMenu())}.observesBefore("_highlightIndex"),_highlightDidChange:function(){var e=this.get("_highlightIndex"),t=this.get("_menuItems").objectAt(e),i={isSet:!1,value:null};Ember.isNone(t)||(this._toggleClass("is-selected",e),t.isSelected=!0,t.isSelectable()&&(i={isSet:!0,value:t.item})),this.set("_internalSelection",i)}.observes("_highlightIndex"),_userHighlightIndexDidChange:function(){this.set("_highlightIndex",this.get("_userHighlightIndex"))}.observes("_userHighlightIndex"),_clearKeySearch:function(){Ember.isNone(this._timer)||Ember.run.cancel(this._timer),this._searchKey=""},_doKeySearch:function(e){this._searchKey=(this._searchKey||"")+e;var t=this._findByName(this._searchKey);t>=0&&this.set("_highlightIndex",t),Ember.isNone(this._timer)||Ember.run.cancel(this._timer),this._timer=Ember.run.later(this,this._clearKeySearch,1e3)},_indexToId:function(e){return"%@-%@".fmt(this.get("elementId"),e)},_idToIndex:function(e){var t=new RegExp("%@-(\\d+)".fmt(this.get("elementId"))),i=t.exec(e);return i&&2===i.length?parseInt(i[1],10):-1},_tryOpenSubmenu:function(e){var t=this.get("_highlightIndex"),i=this.get("_menuItems").objectAt(t);if(!i)return!1;var n=i.subMenuItems;if(!Ember.isNone(n)&&i.isEnabled()&&n.get("length")>0){this._clearKeySearch();var s=i.subMenuView;return Ember.isNone(s)&&(s=this.createSubMenu(n),i.subMenuView=s),s.popup(i.$(),this.get("subMenuPosition")||Flame.POSITION_RIGHT),e&&s._selectNext(1),!0}return!1},didInsertElement:function(){this._super();var e=this;this.$().on("mouseenter mouseup mousedown",".flame-menu-item-view",function(t){return e.handleMouseEvents(t)})},willDestroyElement:function(){this._super(),this.$().off("mouseenter mouseup mousedown")}})}(),function(){"use strict";Flame.AutocompleteMenuView=Flame.MenuView.extend({keyPress:function(){return!1},deleteBackward:function(){return this.get("highlightIndex")>=0},insertTab:function(){return this.close(),!1},moveDown:function(){this.get("textField").didLoseKeyResponder(),this._super()},moveRight:function(){return!1},moveLeft:function(){return!1},close:function(){this._super(),this.get("textField").didBecomeKeyResponder()}})}(),function(){"use strict";var e=Ember.computed.alias,t=Flame.computed.trueFalse,i=Ember.computed.equal;Flame.TextField=Ember.TextField.extend(Flame.EventManager,Flame.FocusSupport,{classNameBindings:["isInvalid","isEditableLabel","isFocused"],acceptsKeyResponder:!0,type:t("parentView.isPassword","password","text"),isInvalid:i("parentView.isValid",!1),value:e("parentView.value"),placeholder:e("parentView.placeholder"),isEditableLabel:e("parentView.isEditableLabel"),isVisible:e("parentView.isVisible"),disabled:e("parentView.isDisabled"),name:e("parentView.name"),attributeBindings:["name","disabled"],_setValueDelay:700,_timer:null,init:function(){this._super(),this.off("keyUp"),this.off("input"),this.on("input",this,this._setValue)},willDestroyElement:function(){this._timer&&(Ember.run.cancel(this._timer),this._elementValueDidChange())},_setValue:function(){this.get("parentView.setValueOnEachKeyUp")?this._elementValueDidChange():(this._timer&&Ember.run.cancel(this._timer),this._timer=Ember.run.later(this,function(){this._elementValueDidChange()},this._setValueDelay))},insertNewline:function(){return this._elementValueDidChange(),Ember.run.sync(),!1},cancel:function(){return!1},mouseDown:function(){return Flame.ALLOW_BROWSER_DEFAULT_HANDLING},mouseMove:function(){return Flame.ALLOW_BROWSER_DEFAULT_HANDLING},mouseUp:function(){return Flame.ALLOW_BROWSER_DEFAULT_HANDLING}}),Flame.TextFieldView=Flame.View.extend(Flame.ActionSupport,{classNames:["flame-text"],childViews:["textField"],acceptsKeyResponder:!0,layout:{left:0,top:0},defaultHeight:22,defaultWidth:200,value:"",placeholder:null,isPassword:!1,isValid:null,isEditableLabel:!1,isVisible:!0,isDisabled:!1,name:null,setValueOnEachKeyUp:!0,becomeKeyResponder:function(){this.get("textField").becomeKeyResponder()},insertNewline:function(){return this.fireAction()},textField:Flame.TextField})}(),function(){"use strict";Flame.AutocompleteTextFieldView=Flame.TextFieldView.extend(Flame.Statechart,Flame.ActionSupport,{_autocompleteView:null,_lastQueuedQuery:null,autocompleteDelegate:null,initialFlameState:"idle",textField:Flame.TextField.extend({_debounce:null,keyUp:function(e){this._super(e),this._debounce=Ember.run.debounce(this,"autocompleteAction",e,500)},autocompleteAction:function(e){if(8===e.which||e.which>31){var t=this.$().val();return this.get("parentView").doAutocompleteRequest(t),!0}},willDestroyElement:function(){this._super(),this._debounce&&Ember.run.cancel(this._debounce)}}),idle:Flame.State.extend({enterState:function(){var e=this.get("owner._lastQueuedQuery");e&&(this.set("owner._lastQueuedQuery",null),this.doAutocompleteRequest(e))},doAutocompleteRequest:function(e){this.get("owner.autocompleteDelegate")&&(e&&this.get("owner.autocompleteDelegate").fetchAutocompleteResults(e,this.get("owner"))?this.gotoFlameState("requesting"):this.get("owner")._closeAutocompleteMenu())}}),requesting:Flame.State.extend({enterState:function(){this.get("owner")._closeAutocompleteMenu()},doAutocompleteRequest:function(e){e&&this.set("owner._lastQueuedQuery",e)},didFinishAutocompleteRequest:function(){this.gotoFlameState("idle")},didFetchAutocompleteResults:function(e){return 0===e.length?void this.get("owner")._closeAutocompleteMenu():void(null===this.get("owner._lastQueuedQuery")&&this.get("owner")._showAutocompleteMenu(e))}}),_showAutocompleteMenu:function(e){!this._autocompleteMenu||this._autocompleteMenu.isDestroyed?(this._autocompleteMenu=Flame.AutocompleteMenuView.create({minWidth:this.$().width(),target:this,textField:this.get("textField"),action:"_selectAutocompleteItem",items:e}),this._autocompleteMenu.popup(this)):this._autocompleteMenu.isDestroyed||this._autocompleteMenu.set("items",e)},_selectAutocompleteItem:function(e){this.set("value",this._autocompleteMenu.get("items").findBy("value",e).title)},_closeAutocompleteMenu:function(){this._autocompleteMenu&&(this._autocompleteMenu.close(),this._autocompleteMenu=null)}})}(),function(){"use strict";Flame.CheckboxView=Flame.ButtonView.extend({classNames:["flame-checkbox-view"],isSticky:!0,render:function(e){e.push('<div class="flame-checkbox-box"></div>'),this.renderCheckMark(e),e.push('<label class="flame-checkbox-label">'),e.push(Ember.isNone(this.get("title"))?"":Handlebars.Utils.escapeExpression(this.get("title"))),e.push("</label>")},renderCheckMark:function(e){var t=Flame.image("checkmark.svg");e.push('<div class="flame-view flame-checkbox-checkmark" style="left: 4px; top: 2px;"><img src="'+t+'"></div>')}})}(),function(){"use strict";Flame.SelectButtonView=Flame.ButtonView.extend({classNames:["flame-select-button-view"],items:[],value:void 0,defaultHeight:22,itemTitleKey:"title",itemValueKey:"value",itemActionKey:"action",subMenuKey:"subMenu",handlebars:function(){var e=this.get("itemTitleKey");return'<label {{bind-attr title="view._selectedMenuItem.%@"}}>{{view._selectedMenuItem.%@}}</label><div><img src="%@"></div>'.fmt(e,e,Flame.image("select_button_arrow.svg"))}.property("itemTitleKey"),_selectedMenuItem:function(){if(void 0===this.get("value"))return void 0;var e=this._findItem();return e}.property("value","itemValueKey","subMenuKey","items"),itemsDidChange:function(){this.get("items")&&this.get("items.length")>0&&!this._findItem()&&this.set("value",this.get("items.firstObject.%@".fmt(this.get("itemValueKey"))))}.observes("items"),_findItem:function(e){e||(e=this.get("items"));var t,i=this.get("itemValueKey"),n=this.get("value"),s=this.get("subMenuKey");return Ember.isNone(e)?t:(e.forEach(function(e){var r=Ember.get(e,s);if(r){var o=this._findItem(r);Ember.isNone(o)||(t=o)}else Ember.get(e,i)===n&&(t=e)},this),t)},mouseDown:function(){return this.get("isDisabled")||this._openMenu(),!0},insertSpace:function(){return this._openMenu(),!0},_openMenu:function(){this.gotoFlameState("mouseDownInside");var e=this;Flame.MenuView.createWithMixins({selectButtonView:this,itemTitleKey:this.get("itemTitleKey"),itemValueKey:this.get("itemValueKey"),itemActionKey:this.get("itemActionKey"),subMenuKey:this.get("subMenuKey"),items:Ember.computed.alias("selectButtonView.items"),value:Ember.computed.alias("selectButtonView.value"),minWidth:this.get("layout.width")||this.$().width(),close:function(){e.gotoFlameState("idle"),this._super()}}).popup(this)}})}(),function(){"use strict";Flame.ComboBoxView=Flame.SelectButtonView.extend({classNames:["flame-combo-box-view"],childViews:["textView","buttonView"],handlebars:null,acceptsKeyResponder:!1,textView:Flame.TextFieldView.extend({layout:{left:0,right:3},value:Ember.computed.alias("parentView.value")}),insertSpace:function(){return!1},buttonView:Flame.ButtonView.extend({acceptsKeyResponder:!1,handlebars:'<img src="%@">'.fmt(Flame.image("select_button_arrow.svg")),layout:{right:-2,width:22,height:22},action:function(){this.get("parentView")._openMenu()}})})}(),function(){"use strict";Flame.DisclosureView=Flame.LabelView.extend({classNames:["flame-disclosure-view"],imageExpanded:Flame.image("disclosure_triangle_down.svg"),imageCollapsed:Flame.image("disclosure_triangle_right.svg"),image:function(){return this.get(this.get("visibilityTarget")?"imageExpanded":"imageCollapsed")}.property("visibilityTarget","imageExpanded","imageCollapsed"),handlebars:'<img {{bind-attr src="view.image"}}> {{view.value}}',action:function(){return this.toggleProperty("visibilityTarget"),!0}})}(),function(){"use strict";Flame.ErrorMessageView=Flame.LabelView.extend({classNames:["flame-form-view-validation-error"],classNameBindings:["pointToClass","skinny"],skinny:!1,pointTo:"left",textAlign:function(){return"left"===this.get("pointTo")?Flame.ALIGN_LEFT:Flame.ALIGN_RIGHT}.property("pointTo"),pointToClass:function(){return"points-to-%@".fmt(this.get("pointTo"))}.property("pointTo"),handlebars:'<div class="pointer"></div><div class="error-box">{{view.value}}</div>'})}(),function(){"use strict";Flame.FormView=Flame.View.extend({classNames:["form-view"],tagName:"form",defaultTarget:null,object:null,leftMargin:20,rightMargin:20,topMargin:20,bottomMargin:20,rowSpacing:10,columnSpacing:10,buttonSpacing:15,labelWidth:150,labelAlign:Flame.ALIGN_RIGHT,buttonWidth:90,controlWidth:null,defaultFocus:null,_focusRingMargin:3,init:function(){this._super(),this.get("layoutManager")||this.set("layoutManager",Flame.VerticalStackLayoutManager.create({topMargin:this.get("topMargin"),spacing:this.get("rowSpacing"),bottomMargin:this.get("bottomMargin")})),this.set("_errorViews",[]),this.set("controls",[]),this._propertiesDidChange()},_propertiesDidChange:function(){this.destroyAllChildren(),this.get("properties").forEach(function(e){var t=this._createLabelAndControl(e);this.pushObject(this.createChildView(t))},this);var e=this.get("buttons");e&&e.get("length")>0&&this.pushObject(this.createChildView(this._buildButtons(e)))}.observes("properties.[]"),_createLabelAndControl:function(e){var t,i=Ember.Object.createWithMixins(e),n=i.view||this._buildControl(i),s=this;return Ember.isNone(i.label)&&(t=this._createChildViewWithLayout(n,this,this.get("leftMargin")+this._focusRingMargin,this.get("rightMargin")+this._focusRingMargin)),"checkbox"===i.type&&(t=this._createChildViewWithLayout(n,this,this.get("leftMargin")+this.labelWidth+this.columnSpacing-4,this._focusRingMargin)),t?Flame.View.extend({layoutManager:Flame.VerticalStackLayoutManager.create({topMargin:this._focusRingMargin,spacing:0,bottomMargin:this._focusRingMargin}),childViews:["control"],control:t}):(t={layout:{left:this.get("leftMargin"),right:this.get("rightMargin")},layoutManager:Flame.VerticalStackLayoutManager.create({topMargin:this._focusRingMargin,spacing:0,bottomMargin:this._focusRingMargin}),childViews:["label","control"],isVisible:void 0===e.isVisible?!0:e.isVisible,label:this._buildLabel(i),control:function(){return s._createChildViewWithLayout(n,this,s.labelWidth+s.columnSpacing,s._focusRingMargin)}.property()},i.get("isVisibleBinding")&&(delete t.isVisible,t.isVisibleBinding=i.get("isVisibleBinding")),Flame.View.extend(t))
},_createChildViewWithLayout:function(e,t,i,n){var s=t.createChildView(e);return s.get("layout")||s.set("layout",{}),s.set("layout.left",i),s.set("layout.right",n),s},_buildLabel:function(e){return Flame.LabelView.extend({layout:{left:0,width:this.get("labelWidth"),top:this._focusRingMargin},ignoreLayoutManager:!0,textAlign:this.get("labelAlign"),value:e.get("label")+":",attributeBindings:["title"],title:e.get("tooltip")||e.get("label")})},_buildButtons:function(e){var t=this;return Flame.View.extend({layout:{left:this.get("leftMargin"),right:this.get("rightMargin"),topMargin:this.get("buttonSpacing"),height:30},init:function(){this._super();var i=t._focusRingMargin;(e||[]).forEach(function(e){var n=this.createChildView(t._buildButton(e,i));i+=(n.get("layout.width")||0)+15,this.pushObject(n)},this)}})},_buildButton:function(e,t){var i=jQuery.extend({targetBinding:"^defaultTarget"},e);return i.layout||(i.layout={width:this.get("buttonWidth"),right:t}),i.layout.top=this._focusRingMargin,e.target&&delete i.targetBinding,Flame.ButtonView.extend(i)},_buildValidationObservers:function(e){if(Ember.isNone(e))return{};var t=this;return{didInsertElement:function(){this._super(),this.isValidDidChange()},isValidWillChange:function(){var e=this.get("_errorView");e&&!this.get("isValid")&&(e.remove(),this.set("_errorView",null),t.set("_errorViews",t.get("_errorViews").without(e)))}.observesBefore("isValid"),isValidDidChange:function(){if(!this.get("isValid")&&!this.get("_errorView")){var i=this.$(),n=i.offset();if(Ember.isNone(n))return;var s=Flame._zIndexCounter,r=e;jQuery.isFunction(e)&&(r=e(this.get("value")));var o=Flame.ErrorMessageView.create({layout:{top:n.top-7,left:n.left+i.outerWidth()-4,width:null,height:null,zIndex:s},value:r,parentView:t,isVisibleBinding:"parentView.isVisible"}).append();this.set("_errorView",o),t.get("_errorViews").pushObject(o)}}.observes("isValid")}},_performTab:function(e){var t=Flame.keyResponderStack.current();(t instanceof Ember.TextField||t instanceof Ember.TextArea)&&(t=t.get("parentView"));var i=this.toArray().mapProperty("childViews").reduce(function(e,t){return e.concat(t)}).filter(function(e){return e.get("acceptsKeyResponder")&&e.get("isVisible")});if(!Ember.isEmpty(i)){var n=i.indexOf(t);n+=e,0>n?i.objectAt(i.get("length")-1).becomeKeyResponder():n===i.get("length")?i.objectAt(0).becomeKeyResponder():i.objectAt(n).becomeKeyResponder()}},insertTab:function(){return this._performTab(1),!0},insertBacktab:function(){return this._performTab(-1),!0},_buildControl:function(e){var t=e.get("property"),i=this.get("object"),n={topPadding:1,bottomPadding:1,width:this.get("controlWidth")};e.controlLayout&&jQuery.extend(n,e.controlLayout);var s={layout:n,value:Ember.computed.alias("parentView.parentView.object.%@".fmt(t)),isValid:Ember.computed.notEqual("parentView.parentView.object.%@IsValid".fmt(t),!1),isDisabled:e.isDisabled?e.isDisabled:Ember.computed.equal("parentView.parentView.object.%@IsDisabled".fmt(t),!0)};this.get("defaultFocus")===t&&(s.isDefaultFocus=!0);var r=e.get("validate");r&&(i.get("validations")||i.set("validations",{}),i.setValidationFor(t,r)),jQuery.extend(s,this._buildValidationObservers(e.get("validation")));var o=e.get("type")||"text";if((e.options||e.optionsBinding)&&(o="select"),Ember.isNone(s.action)&&("text"===o||"textarea"===o||"password"===o)){var a=this;s.fireAction=function(){var e=a.firstDescendantWithProperty("isDefault");e&&e.simulateClick&&e.simulateClick()}}return s.classNames=s.classNames||[],s.classNames.push("form-view-"+o),this._buildControlView(s,o,e)},_buildControlView:function(e,t,i){switch(t){case"readonly":return e.isSelectable=i.get("isSelectable")!==!1,e.attributeBindings=["title"],e.titleBinding="value",Flame.LabelView.extend(e);case"text":return e.name=Ember.isNone(i.name)?i.property:i.name,i.isAutocomplete?(e.autocompleteDelegate=i.autocompleteDelegate,Flame.AutocompleteTextFieldView.extend(e)):(i.setValueOnEachKeyUp===!1&&(e.setValueOnEachKeyUp=!1),Flame.TextFieldView.extend(e));case"textarea":return e.layout.height=i.height||70,Flame.TextAreaView.extend(e);case"password":return e.isPassword=!0,e.name=Ember.isNone(i.name)?i.property:i.name,Flame.TextFieldView.extend(e);case"html":return Flame.LabelView.extend(jQuery.extend(e,{escapeHTML:!1,formatter:function(e){return null===e?"":e}}));case"checkbox":return e.title=i.label,e.isSelected=e.value,delete e.value,Flame.CheckboxView.extend(e);case"select":return e.itemValueKey=i.itemValueKey||"value",e.subMenuKey=i.subMenuKey||"subMenu",i.optionsBinding?(e.itemTitleKey=i.itemTitleKey||"name",e.itemsBinding=i.optionsBinding):i.options&&(e.itemTitleKey=i.itemTitleKey||"title",e.items="function"===Ember.typeOf(i.options)?i.options.apply(this):i.options),i.get("allowNew")?Flame.ComboBoxView.extend(e):Flame.SelectButtonView.extend(e)}throw new Error("Invalid control type %@".fmt(t))},willDestroyElement:function(){this.get("_errorViews").forEach(function(e){e.remove()})},isValid:function(){return 0===this.get("_errorViews").length}.property("_errorViews.[]")})}(),function(){"use strict";Flame.SplitViewDividerViewBase=Ember.Mixin.create(Flame.Statechart,{classNames:["flame-split-view-divider"],initialFlameState:"idle",idle:Flame.State.extend({mouseDown:function(e){var t=this.get("owner.parentView");return t.get("allowResizing")?(t.startResize(e,this),this.gotoFlameState("resizing"),!0):!1},touchStart:function(e){return this.mouseDown(this.normalizeTouchEvents(e)),!0},doubleClick:function(e){var t=this.get("owner.parentView");return t.get("allowResizing")?(t.toggleCollapse(e),!0):!1}}),resizing:Flame.State.extend({mouseMove:function(e){return this.get("owner.parentView").resize(e),!0},touchMove:function(e){return e.preventDefault(),this.mouseMove(this.normalizeTouchEvents(e)),!0},mouseUp:Flame.State.gotoFlameState("idle"),touchEnd:Flame.State.gotoFlameState("idle"),exitState:function(){var e=this.get("owner.parentView");e.endResize&&e.endResize()}})})}(),function(){"use strict";Flame.SplitView=Flame.View.extend({allowResizing:!0,dividerThickness:7,dividerView:Flame.View.extend(Flame.SplitViewDividerViewBase),didInsertElement:function(){this._updateLayout()}})}(),function(){"use strict";Flame.HorizontalSplitView=Flame.SplitView.extend({classNames:["flame-horizontal-split-view"],childViews:["topView","dividerView","bottomView"],topHeight:100,bottomHeight:100,minTopHeight:0,minBottomHeight:0,flex:"bottom",_unCollapsedTopHeight:void 0,_unCollapsedBottomHeight:void 0,_resizeStartY:void 0,_resizeStartTopHeight:void 0,_resizeStartBottomHeight:void 0,init:function(){this._super(),"bottom"===this.get("flex")?this.set("bottomHeight",void 0):this.set("topHeight",void 0)},_updateLayout:function(){var e=this.get("topView"),t=this.get("dividerView"),i=this.get("bottomView"),n=this.$().innerHeight(),s=this.get("dividerThickness"),r="bottom"===this.get("flex")?this.get("topHeight"):void 0,o="top"===this.get("flex")?this.get("bottomHeight"):void 0;void 0===r&&void 0!==o&&null!==n&&0!==n&&(r=n-o-s),void 0===o&&void 0!==r&&null!==n&&0!==n&&(o=n-r-s),"number"==typeof r&&r<this.get("minTopHeight")&&(o+=r-this.get("minTopHeight"),r=this.get("minTopHeight")),"number"==typeof o&&o<this.get("minBottomHeight")&&(r+=o-this.get("minBottomHeight"),o=this.get("minBottomHeight")),this.set("topHeight",r),this.set("bottomHeight",o),"bottom"===this.get("flex")?(this._setDimensions(e,0,r,""),this._setDimensions(t,r,s,""),this._setDimensions(i,r+s,"",0)):(this._setDimensions(e,0,"",o+s),this._setDimensions(t,"",s,o),this._setDimensions(i,"",o,0))}.observes("topHeight","bottomHeight","minTopHeight","minBottomHeight"),_setDimensions:function(e,t,i,n){e.get("layout").setProperties({left:0,height:i,right:0,top:t,bottom:n}),e.updateLayout()},toggleCollapse:function(){this.get("allowResizing")&&("bottom"===this.get("flex")?this.get("topHeight")===this.get("minTopHeight")&&void 0!==this._unCollapsedTopHeight?this.set("topHeight",this._unCollapsedTopHeight):(this._unCollapsedTopHeight=this.get("topHeight"),this.set("topHeight",this.get("minTopHeight"))):this.get("bottomHeight")===this.get("minBottomHeight")&&void 0!==this._unCollapsedBottomHeight?this.set("bottomHeight",this._unCollapsedBottomHeight):(this._unCollapsedBottomHeight=this.get("bottomHeight"),this.set("bottomHeight",this.get("minBottomHeight"))))},startResize:function(e){this._resizeStartY=e.pageY,this._resizeStartTopHeight=this.get("topHeight"),this._resizeStartBottomHeight=this.get("bottomHeight")},resize:function(e){"bottom"===this.get("flex")?this.set("topHeight",this._resizeStartTopHeight+(e.pageY-this._resizeStartY)):this.set("bottomHeight",this._resizeStartBottomHeight-(e.pageY-this._resizeStartY))}})}(),function(){"use strict";Flame.ListItemView=Flame.View.extend({useAbsolutePosition:!1,classNames:["flame-list-item-view"],classNameBindings:["isSelected","parentView.allowReordering","isDragged"],isSelected:!1,_parentViewOnMouseDown:void 0,displayProperties:["content"],acceptsKeyResponder:!1,childListView:null,mouseMove:function(e){return void 0!==this._parentViewOnMouseDown?this._parentViewOnMouseDown.mouseMove(e):!1},mouseDown:function(e){return this._parentViewOnMouseDown=this.get("parentView"),this._parentViewOnMouseDown.mouseDownOnItem(this.get("contentIndex"),e)},mouseUp:function(e){if(void 0!==this._parentViewOnMouseDown){var t=this._parentViewOnMouseDown;return this._parentViewOnMouseDown=void 0,t.mouseUpOnItem(e)}return!1},touchMove:function(e){return void 0!==this._parentViewOnMouseDown?this._parentViewOnMouseDown.touchMove(e):!1},touchStart:function(e){return this._parentViewOnMouseDown=this.get("parentView"),this._parentViewOnMouseDown.mouseDownOnItem(this.get("contentIndex"),e)},touchEnd:function(e){if(void 0!==this._parentViewOnMouseDown){var t=this._parentViewOnMouseDown;return this._parentViewOnMouseDown=void 0,t.mouseUpOnItem(e)}return!1}})}(),function(){"use strict";Flame.LazyListViewStates={},Flame.LazyListViewStates.MouseIsDown=Flame.State.extend({xOffset:null,yOffset:null,exitState:function(){this.xOffset=this.yOffset=null},mouseMove:function(e){var t=this.get("owner"),i=t.get("parentView");if(!i.get("allowReordering")||i.disableReordering(e))return!0;if(null===this.xOffset&&(this.xOffset=e.pageX,this.yOffset=e.pageY),Math.abs(e.pageY-this.yOffset)<3)return!0;var n=t.$().offset();return this.set("owner.xOffset",this.xOffset-n.left),this.set("owner.yOffset",this.yOffset-n.top),this.gotoFlameState("dragging"),!0},mouseUp:function(){var e=this.get("owner"),t=e.get("parentView");return t.selectIndex(e.get("contentIndex")),this.gotoFlameState("idle"),!0}}),Flame.LazyListItemView=Flame.ListItemView.extend(Flame.Statechart,{layout:{left:0,right:0,height:25},initialFlameState:"idle",init:function(){this.set("displayProperties",[]),this._super()},mouseDown:function(e){return this.invokeStateMethod("mouseDown",e),!0},mouseMove:function(e){return this.invokeStateMethod("mouseMove",e),!0},mouseUp:function(e){return this.invokeStateMethod("mouseUp",e),!0},idle:Flame.State.extend({mouseDown:function(){this.gotoFlameState("mouseIsDown")}}),mouseIsDown:Flame.LazyListViewStates.MouseIsDown,dragging:Flame.State.extend({clone:null,indicator:null,scrollViewOffset:null,enterState:function(){var e=this.get("owner"),t=e.get("parentView");e.willStartDragging&&e.willStartDragging();var i=t.$();this.set("owner.isDragged",!0),this.scrollViewOffset=t.get("parentView").$().offset(),this.clone=this.$().safeClone(),this.clone.addClass("dragged-clone"),this.clone.draggingInfo={currentIndex:this.get("owner.contentIndex")},this.indicator=jQuery('<div class="indicator"><img src="%@"></div>'.fmt(Flame.image("reorder_indicator.svg"))).hide(),i.append(this.clone),i.append(this.indicator)},exitState:function(){this.set("owner.isDragged",!1),this.finishDragging(),this.clone.remove(),this.clone=null,this.indicator.remove(),this.indicator=null},mouseMove:function(e){var t=this.get("owner"),i=t.get("parentView");this.listViewPosition=i.$().position();var n=i.get("parentView"),s=e.pageY-t.get("yOffset")+n.lastScrollY-(n.lastScrollY+this.listViewPosition.top)-this.scrollViewOffset.top,r=e.pageX-this.scrollViewOffset.left-t.get("xOffset");return this.didDragItem(s,r),!0},mouseUp:function(){return this.gotoFlameState("idle"),!0},didDragItem:function(e,t){this.clone.css(this.get("owner.parentView.constrainDragginToXAxis")?{top:e}:{top:e,left:t});var i=this.get("owner.parentView.itemHeight"),n=Math.ceil(e/i);this.clone.draggingInfo=this.get("owner.parentView").indexForMovedItem(this.clone.draggingInfo,n,this.get("owner.contentIndex"),t);var s=this.clone.draggingInfo.currentIndex*i;this.indicator.css({top:s-1+"px","margin-left":20*this.clone.draggingInfo.level+7+"px"}),this.indicator.show()},finishDragging:function(){this.get("owner.parentView").moveItem(this.get("owner.contentIndex"),this.clone.draggingInfo)}})})}(),function(){"use strict";Flame.ListViewDragHelper=Ember.Object.extend({listView:void 0,lastPageX:void 0,yOffset:void 0,itemPath:void 0,lastTargetContent:null,clone:void 0,mouseMoveCounter:0,initReorder:function(){var e=Flame.ListViewDragHelper.Path.create({array:this.itemPath,root:this.listView});this.itemPath=e,this.reorderCssClass=this.isTree()?".flame-tree-item-view-container":".flame-list-item-view";var t=this.itemPath.getView();t.set("isDragged",!0);var i=t.$(),n=i.clone();i.attr("id")&&n.attr("id",i.attr("id")+"_drag"),n.addClass("is-dragged-clone"),n.find("*").each(function(){this.id&&(this.id=this.id+"_drag")}),n.appendTo(this.get("listView").$()),n.css("opacity",.8),this.clone=n,this._updateCss();var s=this.get("listView");n.mousemove(function(){return s.mouseMove.apply(s,arguments),!0}),n.mouseup(function(){return s.mouseUp.apply(s,arguments),!0})},updateDisplay:function(e,t){if(void 0===t)this.mouseMoveCounter++;else if(t<=this.mouseMoveCounter)return;this._updateDraggingCloneAndScrollPosition(e);var i=this._resolveNewPath(e.pageX,e.pageY);if(i&&!this.itemPath.equals(i)){var n=this.itemPath.getView();this._moveItem(this.itemPath,i),this.itemPath=this._resolvePath(n),Ember.run.scheduleOnce("afterRender",this,this._updateCss),this.lastPageX=e.pageX}},finishReorder:function(){var e=this.itemPath.getView();this.get("listView").didReorderContent(e.get("parentView.content")),e.set("isDragged",!1);var t=this.clone;Ember.run.schedule("afterRender",function(){t&&t.remove()})},_updateCss:function(){var e=this.itemPath.getView().$();if(e){var t=this.clone.offsetParent().offset().left;this.clone.attr("class",e.attr("class")+" is-dragged-clone"),this.clone.css("left",e.offset().left-t);var i=this.itemPath.getView().$().find(".flame-tree-item-view",".flame-tree-view"),n=this.clone.find(".flame-tree-item-view",".flame-tree-view");n.each(function(e){var n=jQuery(this),s=jQuery(i.get(e));n.attr("class",s.attr("class")),t=n.offsetParent().offset().left,n.css("left",s.offset().left-t)})}},_moveItem:function(e,t){var i=this.get("listView.isDragging");this.set("listView.isDragging",!0);var n=e.getView(),s=n.get("content"),r=n.get("parentView"),o=r.get("content"),a=n.$(),l=t.getView(),h=l.$(),u="i"===t.position?t.getNestedListView():l.get("parentView"),c=u.get("content");o===c&&o.startMoving&&o.startMoving(),r.removeObject(n),o.removeObject(s),r._updateContentIndexes(),a.detach();var d,g=l.get("contentIndex");if("b"===t.position)a.insertBefore(h),d=g;else if("a"===t.position)a.insertAfter(h),d=g+1;else{if("i"!==t.position)throw new Error("Invalid insert position "+t.position);h.find(".flame-list-view").first().prepend(a),d=0}n.set("_parentView",u),u.insertAt(d,n),c.insertAt(d,s),o===c&&o.endMoving&&o.endMoving(),u._updateContentIndexes(),this.set("listView.isDragging",i)},isTree:function(){return this.listView instanceof Flame.TreeView},_resolveNewPath:function(e){for(var t=this.itemPath.getView(),i=t.$(),n=this.get("listView").$().find(this.reorderCssClass),s=this.isTree()?i.children(this.reorderCssClass).first():i,r=n.index(s),o=this.clone.offset().top,a=o+this.clone.outerHeight(),l=o-i.offset().top,h=l>0?1:-1,u=r+h,c=n.length,d=r;u>=0&&c>u;){var g=jQuery(n[u]);if(g.closest(".is-dragged-clone").length>0)break;if(g.is(":visible")&&0===g.closest(i).length){var m=g.offset().top+g.outerHeight()*(.5+.2*h);if(!(h>0&&a>m||0>h&&m>o))break;d=u}u+=h}var p=Ember.View.views[jQuery(n[d]).closest(".flame-list-item-view").attr("id")],f=this._resolvePath(p),v=h>0&&p.get("hasChildren")&&p.get("isExpanded")&&!this._pathInvalid(t,f);return v||(f.position=h>0?"a":"b"),f=this._resolveNewLevel(t,p,f,e),this._pathInvalid(t,f)?null:f},_resolveNewLevel:function(e,t,i,n){for(var s=n-this.lastPageX,r=10;(-r>s||this._pathInvalid(e,i))&&("a"===i.position||this.itemPath.equals(i))&&i.array.length>1&&t.get("contentIndex")===t.get("parentView.length")-1;)s+=r,i=i.up(),t=i.getView();for(var o;(s>r||this._pathInvalid(e,i))&&("i"!==i.position||this.itemPath.equals(i))&&void 0!==(o=this._getPrecedingView(t))&&o!==e&&o.get("hasChildren")&&o.get("isExpanded")&&!this._pathInvalid(e,this._resolvePath(o).down());)s-=r,i=this._resolvePath(o).down(),t=i.getView();return i},_pathInvalid:function(e,t){var i=e.get("content"),n=t.getView().get("content"),s=null;if("i"===t.position)s=n;else{var r=t.up().getView();r&&(s=r.get("content"))}var o=this.get("listView").isValidDrop(i,s,n);return!o},_getPrecedingView:function(e){return e.get("contentIndex")>0?e.get("parentView").objectAt(e.get("contentIndex")-1):void 0},_resolvePath:function(e){var t=[],i=e.get("parentView");do t.insertAt(0,e.get("contentIndex")),i=e.get("parentView");while(i.get("isNested")&&void 0!==(e=i.get("parentView")));return Flame.ListViewDragHelper.Path.create({array:t,root:this.listView})},_updateDraggingCloneAndScrollPosition:function(e){var t=this.get("listView").$();t.hasClass("is-nested")&&(t=t.offsetParent());var i=t.scrollTop(),n=t.innerHeight(),s=e.pageY-this.yOffset-t.offset().top+i;0>s&&(s=0);var r=this.clone.outerHeight(),o=t[0].scrollHeight;if(s+r>o&&(s=o-r),this.clone.css({position:"absolute",right:0,top:s}),"auto"===t.css("overflow")){var a=i-s;a>0&&t.scrollTo("-=%@px".fmt(Math.max(a/5,1)));var l=s+r-(i+n);l>0&&t.scrollTo("+=%@px".fmt(Math.max(l/5,1))),(a>0||l>0)&&Ember.run.scheduleOnce("afterRender",this,this.updateDisplay,e,this.mouseMoveCounter)}}}),Flame.ListViewDragHelper.Path=Ember.Object.extend({array:[],position:"i",root:null,getView:function(){var e,t,i=this.array.length,n=this.root;for(t=0;i>t;t++){var s=this.array[t];e=n.objectAt(s),i-1>t&&(n=e.get("childListView"))}return e},getNestedListView:function(){return this.getView().get("childListView")},up:function(){var e=this.array.slice(0,this.array.length-1);return Flame.ListViewDragHelper.Path.create({array:e,position:"a",root:this.root})},down:function(){var e,t=Ember.copy(this.array),i=this.getNestedListView().get("content.length");return i>0?(t.push(i-1),e="a"):e="i",Flame.ListViewDragHelper.Path.create({array:t,position:e,root:this.root})},equals:function(e){var t=this.array.length,i=e.array.length;if(t!==i)return!1;for(var n=0;t>n;n++)if(this.array[n]!==e.array[n])return!1;return!0}})}(),function(){"use strict";Flame.ListView=Flame.CollectionView.extend(Flame.Statechart,{classNames:["flame-list-view"],classNameBindings:["isFocused"],acceptsKeyResponder:!0,allowSelection:!0,allowReordering:!0,selection:void 0,initialFlameState:"idle",reorderDelegate:null,_minimumDeltaToStartDrag:4,init:function(){this._super(),this._selectionDidChange()},itemViewClass:Flame.ListItemView.extend({templateContext:function(e,t){return void 0!==t?t:Ember.get(this,"content")}.property("content"),template:Ember.computed.alias("parentView.template"),handlebars:"{{view.title}}"}),selectIndex:function(e){if(!this.get("allowSelection"))return!1;var t=this.get("content");if(t){var i=this.objectAt(e);if(i&&i.get("isVisible")&&i.get("allowSelection")!==!1){var n=t.objectAt(e);return this.set("selection",n),!0}}return!1},changeSelection:function(e){for(var t=this.get("content"),i=this.get("selection"),n=t.indexOf(i),s=n+e,r=t.get("length");s>=0&&r>s;){if(this.selectIndex(s))return!0;s+=e}return!1},_selectionWillChange:function(){this._setIsSelectedStatus(this.get("selection"),!1)}.observesBefore("selection"),_selectionDidChange:function(){this._setIsSelectedStatus(this.get("selection"),!0)}.observes("selection"),_setIsSelectedStatus:function(e,t){if(e){var i=(this.get("content")||[]).indexOf(e);if(i>=0){var n=this.objectAt(i);n&&n.set("isSelected",t)}}},_updateContentIndexes:function(){for(var e=this.get("length"),t=0;e>t;t++){var i=this.objectAt(t);i&&i.set("contentIndex",t)}this.consultLayoutManager()},didReorderContent:function(e){var t=this.get("reorderDelegate");t&&Ember.run.next(function(){t.didReorderContent(e)})},isValidDrop:function(e,t,i){var n=this.get("reorderDelegate");return n&&n.isValidDrop?n.isValidDrop(e,t,i):!0},rootTreeView:function(){return this}.property().volatile(),arrayWillChange:function(){return this.get("rootTreeView.isDragging")?void 0:this._super.apply(this,arguments)},arrayDidChange:function(){if(!this.get("rootTreeView.isDragging")){var e=this._super.apply(this,arguments);return this._updateContentIndexes(),e}},childViewsWillChange:function(){this.get("rootTreeView.isDragging")||this._super.apply(this,arguments)},childViewsDidChange:function(){this.get("rootTreeView.isDragging")||this._super.apply(this,arguments)},allowReorderingItem:function(){return!0},idle:Flame.State.extend({moveUp:function(){return this.get("owner").changeSelection(-1)},moveDown:function(){return this.get("owner").changeSelection(1)},mouseDownOnItem:function(e,t){var i=this.get("owner");if(i.selectIndex(e),i.get("allowReordering")&&void 0!==e&&i.allowReorderingItem(e)){var n=i.objectAt(e);i.set("dragHelper",Flame.ListViewDragHelper.create({listView:i,lastPageX:t.pageX,lastPageY:t.pageY,yOffset:t.pageY-n.$().offset().top,itemPath:[e]}))}return this.gotoFlameState("mouseButtonPressed"),!0},enterState:function(){this.get("owner").set("dragHelper",void 0)}}),_shouldStartDragging:function(e){var t=this.get("dragHelper");if(t){var i=Math.abs(t.get("lastPageX")-e.pageX),n=Math.abs(t.get("lastPageY")-e.pageY);return i>this._minimumDeltaToStartDrag||n>this._minimumDeltaToStartDrag}return!1},startReordering:function(e,t){return e.set("listView",this),this.set("dragHelper",e),this.gotoFlameState("reordering"),this.mouseMove(t)},mouseButtonPressed:Flame.State.extend({mouseUpOnItem:Flame.State.gotoFlameState("idle"),mouseUp:Flame.State.gotoFlameState("idle"),mouseMove:function(e){var t=this.get("owner"),i=t.get("dragHelper");return t._shouldStartDragging(e)&&(this.gotoFlameState("idle"),t.startReordering(i,e)),!0},touchEnd:Flame.State.gotoFlameState("idle"),touchMove:function(e){return this.mouseMove(this.normalizeTouchEvents(e)),!0}}),reordering:Flame.State.extend({mouseMove:function(e){var t=this.get("owner.dragHelper");return Ember.run.scheduleOnce("afterRender",t,"updateDisplay",e),!0},mouseUp:Flame.State.gotoFlameState("idle"),touchMove:function(e){return this.mouseMove(this.normalizeTouchEvents(e)),!0},touchEnd:Flame.State.gotoFlameState("idle"),enterState:function(){var e=this.get("owner");e.get("dragHelper").initReorder(),e.set("isDragging",!0)},exitState:function(){var e=this.get("owner");e.get("dragHelper").finishReorder(),e.set("dragHelper",void 0),e.set("isDragging",!1)}})})}(),function(){"use strict";Flame.LazyListView=Flame.ListView.extend({classNames:["flame-lazy-list-view"],itemHeight:25,bufferSize:10,constrainDragginToXAxis:!1,_suppressObservers:!1,_lastScrollHeight:void 0,_lastScrollTop:void 0,_recycledViews:null,init:function(){this._super(),this._recycledViews={}},arrayWillChange:function(){},arrayDidChange:function(e){e&&!this._suppressObservers&&this.fullRerender()},fullRerender:function(){var e=this;this.forEachChildView(function(t){"undefined"!=typeof t.get("contentIndex")&&e._recycleView(t)}),this.numberOfRowsChanged(),this.didScroll(this._lastScrollHeight,this._lastScrollTop)},didInsertElement:function(){this._updateScrollPosition()},becameVisible:function(){this._updateScrollPosition()},_updateScrollPosition:function(){var e=this.nearestOfType(Flame.ScrollView);if(e&&e.get("element")){var t=e.get("element");this._lastScrollHeight=t.offsetHeight,this._lastScrollTop=t.scrollTop,this.didScroll(this._lastScrollHeight,this._lastScrollTop)}},willDestroyElement:function(){this.forEach(function(e){"undefined"!=typeof e.get("contentIndex")&&this._recycleView(e)},this)},numberOfRowsChanged:function(){Ember.run.scheduleOnce("afterRender",this,this._updateHeight)},_updateHeight:function(){var e=this.numberOfRows()*this.get("itemHeight");this.get("useAbsolutePosition")?this.adjustLayout("height",e):(this.$()&&this.$().css("height",e+"px"),this.get("layout").height=e)},numberOfRows:function(){return this.get("content.length")},didScroll:function(e,t){this._lastScrollHeight=e,this._lastScrollTop=t;var i,n=this._rowsToRenderRange(e,t),s=n.end,r=n.start,o=this._childViews,a=o.length;for(i=0;a>i;i++){var l=o[i],h=l.get("contentIndex");"undefined"!=typeof h&&(h<n.start||h>n.end?l.get("isDragged")||this._recycleView(l):(s=Math.min(s,h),r=Math.max(r,h)))}for(s===n.end&&s++,i=n.start;s>i;i++)this.viewForRow(i);if(r!==n.start)for(i=n.end;i>r;i--)this.viewForRow(i);this._hideRecycledViews()},_rowsToRenderRange:function(e,t){if(!this.get("element"))return{start:0,end:-1};var i=this.numberOfRows(),n=this.get("itemHeight"),s=this.get("parentView.element").scrollTop+this.$().position().top,r=Math.max(0,t-s),o=~~(r/n),a=this.get("bufferSize"),l=~~(e/n)+a,h=o-a/2,u=Math.min(i-1,h+l);return h=Math.max(0,u-l),{start:h,end:u}},viewClassForItem:function(){return this.get("itemViewClass")},itemForRow:function(e){return this.get("content")[e]},rowForItem:function(e){var t=this.get("content").indexOf(e);return-1===t?null:t},viewForRow:function(e,t){var i=this.itemHeightForRow(e),n=this.itemForRow(e),s=this.viewClassForItem(n),r=n.constructor.toString(),o=this._recycledViews[r]&&this._recycledViews[r].pop();return o||(o=this.createChildView(s,jQuery.extend({useAbsolutePosition:!0},t||{})),this.pushObject(o)),o.beginPropertyChanges(),o.set("isSelected",n===this.get("selection")),o.set("content",n),o.set("contentIndex",e),o.layout.top=e*i,o.propertyDidChange("layout"),o.set("isVisible",!0),o.endPropertyChanges(),o},_hideRecycledViews:function(){Ember.changeProperties(function(){var e=this._recycledViews;for(var t in e)for(var i=e[t],n=i.length,s=0;n>s;s++){var r=i[s];r.get("isVisible")&&r.set("isVisible",!1)}},this)},_recycleView:function(e){e.setProperties({contentIndex:void 0,isSelected:!1});var t=e.get("content").constructor.toString();this._recycledViews[t]||(this._recycledViews[t]=[]),this._recycledViews[t].push(e)},selectIndex:function(e){if(!this.get("allowSelection"))return!1;var t=this.itemForRow(e);return this.set("selection",t),!0},changeSelection:function(e){for(var t=this.get("selection"),i=this.rowForItem(t),n=i+e;n>=0&&n<this.numberOfRows();){if(this.selectIndex(n))return!0;n+=e}return!1},_setIsSelectedStatus:function(e,t){if(e){var i=this.rowForItem(e),n=this.childViewForIndex(i);n&&n.set("isSelected",t)}},itemHeightForRow:function(){return this.get("itemHeight")},indexForMovedItem:function(e,t){return{currentIndex:t,toParent:this.get("content"),toPosition:t}},moveItem:function(){throw new Error("Not implemented yet!")},childViewForIndex:function(e){return this.findBy("contentIndex",e)},disableReordering:function(){return!1}})}(),function(){"use strict";Flame.LazyTreeItemView=Flame.LazyListItemView.extend({classNames:["flame-tree-item-view"],itemContent:"{{view.content}}",isExpanded:!1,collapsedImage:Flame.image("disclosure_triangle_right.svg"),expandedImage:Flame.image("disclosure_triangle_down.svg"),handlebars:function(){return"{{{view.disclosureImage}}} <span>"+this.get("itemContent")+"</span>"}.property("itemContent"),isExpandedDidChange:function(){Ember.run.schedule("afterRender",this,function(){this.$().find("img").first().replaceWith(this.get("disclosureImage"))})}.observes("isExpanded"),isExpandable:function(){return this.get("parentView").isExpandable(this.get("content"))},ensureCorrectLevelClass:function(e){if(this._indentationLevel!==e){var t=this.get("classNames"),i="level-"+(e+1);if(this._indentationLevel){var n="level-"+(this._indentationLevel+1);t.removeObject(n),"inDOM"===this.get("_state")&&this.$().removeClass(n)}t.pushObject(i),"inDOM"===this.get("_state")&&this.$().addClass(i),this._indentationLevel=e}},disclosureImage:function(){var e=this.isExpandable();return e?'<img src="%@">'.fmt(this.get(this.get("isExpanded")?"expandedImage":"collapsedImage")):""}.property("isExpanded","content","expandedImage","collapsedImage"),mouseIsDown:Flame.LazyListViewStates.MouseIsDown.extend({mouseUp:function(e){var t=this.get("owner");if(t.isExpandable()){var i=t.get("parentView");t.toggleProperty("isExpanded"),i.toggleItem(t)}return this._super(e)}}),willStartDragging:function(){this.get("isExpanded")&&(this.toggleProperty("isExpanded"),this.get("parentView").toggleItem(this))}})}(),function(){"use strict";Flame.LazyTreeView=Flame.LazyListView.extend({classNames:["flame-tree-view","flame-lazy-tree-view"],itemViewClass:Flame.LazyTreeItemView,_rowToItemCache:null,_itemToRowCache:null,_itemToLevelCache:null,_itemToParentCache:null,_expandedItems:null,_numberOfCachedRows:null,init:function(){this._invalidateRowCache(),this._expandedItems=Ember.Set.create(),this._super()},numberOfRowsChanged:function(){this._invalidateRowCache(),this.loadCache(),this._super()},numberOfRows:function(){return this._numberOfCachedRows},loadItemIntoCache:function(e,t,i){if(this._rowToItemCache[this._numberOfCachedRows]=e,this._itemToRowCache.set(e,this._numberOfCachedRows),this._itemToLevelCache.set(e,t),i&&this._itemToParentCache.set(e,i),this._numberOfCachedRows++,this._expandedItems.contains(e)){var n=e.get("treeItemChildren");if(n)for(var s=n.get("length"),r=0;s>r;r++)this.loadItemIntoCache(n.objectAt(r),t+1,e)}},loadCache:function(){for(var e=this.get("content"),t=e.get("length"),i=0;t>i;i++)this.loadItemIntoCache(e.objectAt(i),0)},viewClassForItem:function(e){return this.get("itemViewClasses")[e.constructor.toString()]},itemForRow:function(e){return this._rowToItemCache[e]},rowForItem:function(e){return this._itemToRowCache.get(e)},levelForItem:function(e){return e?this._itemToLevelCache.get(e):-1},viewForRow:function(e){var t=this.itemForRow(e),i=this._expandedItems.contains(t),n=this._super(e,{isExpanded:i});return n.set("isExpanded",i),n.ensureCorrectLevelClass(this.levelForItem(t)),n},_invalidateRowCache:function(){this._rowToItemCache=[],this._itemToRowCache=Ember.Map.create(),this._itemToLevelCache=Ember.Map.create(),this._itemToParentCache=Ember.Map.create(),this._numberOfCachedRows=0},isExpandable:function(){return!0},collapseItem:function(e){this.changeIsExpanded(e,!1)},expandItem:function(e){this.changeIsExpanded(e,!0)},changeIsExpanded:function(e,t){t?this._expandedItems.add(e):this._expandedItems.remove(e);var i=this.rowForItem(e),n=this.childViewForIndex(i);n&&!n.get("isExpanded")&&(n.set("isExpanded",t),t&&this.toggleItem(n))},toggleItem:function(e){var t=e.get("content"),i=e.get("isExpanded");i?this._expandedItems.add(t):this._expandedItems.remove(t),this.numberOfRowsChanged();var n=[],s=this._rowsToRenderRange(this._lastScrollHeight,this._lastScrollTop);this.forEach(function(e){var t=e.get("contentIndex"),i=e.get("content"),r=this.rowForItem(i);if("undefined"==typeof r&&"undefined"!=typeof t)this._recycleView(e);else if("undefined"!=typeof t){if(n.push(r),t!==r){e.set("contentIndex",r);var o=this.itemHeightForRow(r);e.$().css("top",r*o+"px")}(r<s.start||r>s.end)&&this._recycleView(e)}},this);for(var r=s.start;r<=s.end;r++)-1===n.indexOf(r)&&this.viewForRow(r);this._hideRecycledViews()},moveRight:function(){return this._collapseOrExpandSelection("expand")},moveLeft:function(){return this._collapseOrExpandSelection("collapse")},_collapseOrExpandSelection:function(e){var t=this.get("selection");if(t){var i=this.rowForItem(t),n=this.childViewForIndex(i);if(!n)return this._expandedItems.contains(t)?this._expandedItems.remove(t):this._expandedItems.add(t),!0;if("collapse"===e&&n.get("isExpanded"))return n.set("isExpanded",!1),this.toggleItem(n),!0;if("expand"===e&&!n.get("isExpanded"))return n.set("isExpanded",!0),this.toggleItem(n),!0}return!1},isValidDrop:function(){return!0},getAncestors:function(e){for(var t=[e],i=this._itemToParentCache.get(e);i;)t.push(i),i=this._itemToParentCache.get(i);return t.push(null),t},indexForMovedItem:function(e,t,i,n){0>t&&(t=0),t>this.numberOfRows()&&(t=this.numberOfRows());var s=this.itemForRow(i),r=this.itemForRow(t-1),o=this.itemForRow(t),a=null;if(this._expandedItems.contains(r))a=r;else for(var l=t-1;l>=0;l--){var h=this.itemForRow(l);
if(!(this.levelForItem(h)>=this.levelForItem(r))&&this._expandedItems.contains(h)){a=h;break}}var u=this.getAncestors(a).filter(function(e){return this.levelForItem(e)+1-this.levelForItem(o)>=0&&this.isValidDrop(s,e)},this);if(0===u.length)return e;var c=this.levelForItem(s),d=~~(n/22),g=c+d,m=null;u.forEach(function(e){(!m||Math.abs(this.levelForItem(e)-g)<Math.abs(this.levelForItem(m)-g))&&(m=e)},this);var p=null;p=m?o&&this.levelForItem(o)===this.levelForItem(m)+1?m.get("treeItemChildren").indexOf(o):m.get("treeItemChildren.length"):o?this.get("content").indexOf(o):this.get("content.length");var f=this.levelForItem(m);return{currentIndex:t,toParent:m,toPosition:p,level:f+1}},moveItem:function(e,t){var i=this.childViewForIndex(e),n=t.currentIndex,s=n>e?-1:1,r=this.get("itemHeight");this.forEachChildView(function(t){var i=t.get("contentIndex");(i>e&&n>i||e>i&&i>=n)&&(t.set("contentIndex",i+s),t.$().css("top",t.get("contentIndex")*r))}),0>s&&n--,i.set("contentIndex",n),i.ensureCorrectLevelClass(t.level),i.$().css("top",n*r),0>s&&n++;var o=this.itemForRow(e),a=this._itemToParentCache.get(o),l=t.toParent,h=a?a.get("treeItemChildren"):this.get("content"),u=l?l.get("treeItemChildren"):this.get("content");h===u&&n>e&&t.toPosition--,this._suppressObservers=!0,h.removeObject(o),u.insertAt(t.toPosition,o),this.numberOfRowsChanged(),Ember.run.next(this,function(){this._suppressObservers=!1});var c=this.get("reorderDelegate");c&&c.didReorderContent&&Ember.run.next(this,function(){c.didReorderContent(o,u)})}})}(),function(){"use strict";Flame.LoadingIndicatorView=Flame.ImageView.extend({layout:{width:16,height:16},classNames:["loading-indicator"],value:Flame.image("loading.gif")})}(),function(){"use strict";Flame.Popover=Flame.Panel.extend({classNames:["flame-popover"],childViews:[],dimBackground:!1,handlebars:'<img {{bind-attr class="view.arrowPosition :arrow"}} {{bind-attr src="view.image"}}>{{view view.contentView}}',anchor:null,position:null,ARROW_UP:Flame.image("arrow_up.png"),ARROW_DOWN:Flame.image("arrow_down.png"),ARROW_LEFT:Flame.image("arrow_left.png"),ARROW_RIGHT:Flame.image("arrow_right.png"),_positionArrow:function(){var e,t=this.get("anchor"),i=this.get("position"),n=this.$("img.arrow"),s=t.offset(),r=this._getDimensionsForAnchorElement(t);i&(Flame.POSITION_ABOVE|Flame.POSITION_BELOW)?(e=s.left+r.width/2-(this.$().css("left")?parseInt(this.$().css("left").replace("px",""),10):0)-15,n.css({left:e+"px"}),i&Flame.POSITION_ABOVE&&n.css({top:this.get("layout.height")-1+"px"})):(e=s.top+r.height/2-parseInt(this.$().css("top").replace("px",""),10)-15,n.css({top:e+"px"}),i&Flame.POSITION_LEFT&&n.css({left:this.get("layout.width")-1+"px"}))}.on("didInsertElement"),_layoutRelativeTo:function(e,t){e=e instanceof jQuery?e:e.$(),this.set("anchor",e),this.set("position",t);var i=this._super(e,t);return(i.movedX||i.movedY)&&(i.movedX&&t&(Flame.POSITION_LEFT|Flame.POSITION_RIGHT)&&(t^=Flame.POSITION_LEFT|Flame.POSITION_RIGHT),i.movedY&&t&(Flame.POSITION_ABOVE|Flame.POSITION_BELOW)&&(t^=Flame.POSITION_ABOVE|Flame.POSITION_BELOW),i=this._super(e,t),this.set("position",t)),t&Flame.POSITION_ABOVE?(i.top-=15,this.set("arrowPosition","above"),this.set("image",this.ARROW_DOWN)):t&Flame.POSITION_BELOW?(i.top+=15,this.set("arrowPosition","below"),this.set("image",this.ARROW_UP)):t&Flame.POSITION_LEFT?(i.left-=15,this.set("arrowPosition","left"),this.set("image",this.ARROW_RIGHT)):t&Flame.POSITION_RIGHT&&(i.left+=15,this.set("arrowPosition","right"),this.set("image",this.ARROW_LEFT)),i},popup:function(e,t){this._super(e,t|Flame.POSITION_MIDDLE)}})}(),function(){"use strict";Flame.ProgressView=Flame.View.extend({classNames:["flame-progress-view"],value:null,maximum:null,animate:!1,handlebars:function(){var e=this.get("layout").height;return"<div style='height: %@px;' class='progress-container'></div><div style='height: %@px; width: %@px;' class='progress-bar'></div>".fmt(e-2,e-4,this.get("size"))}.property(),size:function(){var e=this.get("value")/this.get("maximum");if(isNaN(e))return 0;var t=this.get("layout").width;return e>1&&(e=1),Math.floor(t*e)-4}.property("value","maximum"),sizeDidChange:function(){Ember.run.schedule("afterRender",this,function(){"inDOM"===this.get("_state")&&(this.get("animate")?this.$(".progress-bar").animate({width:this.get("size")},300):this.$(".progress-bar").css("width",this.get("size")))})}.observes("size")})}(),function(){"use strict";Flame.RadioButtonView=Flame.CheckboxView.extend({classNames:["flame-radio-button-view"],action:function(){this.set("targetValue",this.get("value"))},isSelected:function(){return"undefined"===Ember.typeOf(this.get("value"))||"undefined"===Ember.typeOf(this.get("targetValue"))?!1:this.get("value")===this.get("targetValue")}.property("targetValue","value"),renderCheckMark:function(e){e.push('<div class="flame-view flame-checkbox-checkmark" style="top:8px;left:8px;width:6px;height:6px;"></div>')}})}(),function(){"use strict";Flame.ScrollView=Flame.View.extend({classNames:["scroll-view"],lastScrollY:0,isScrolling:!1,didInsertElement:function(){this.$().on("scroll",jQuery.proxy(this.didScroll,this)),this._update()},willDestroyElement:function(){this.$().off("scroll")},didScroll:function(){this.lastScrollY=this.get("element").scrollTop,this.isScrolling||requestAnimationFrame(jQuery.proxy(this._update,this)),this.isScrolling=!0},_update:function(){var e=this.get("element").offsetHeight,t=this.lastScrollY;this.isScrolling=!1;var i,n=this._childViews,s=n.length;for(i=0;s>i;i++){var r=n[i];r.didScroll&&r.didScroll(e,t)}}})}(),function(){"use strict";Flame.SearchTextFieldView=Flame.TextFieldView.extend({classNames:["flame-search-field"],childViews:["textField","clearButton"],clearButton:Flame.ButtonView.extend({resetClassNames:!0,layout:{right:5,top:2},isVisible:Ember.computed.bool("parentView.value"),handlebars:'<img src="/assets/images/search_clear.svg">',action:function(){this.get("parentView").cancel()}}),cancel:function(){return Ember.isEmpty(this.get("value"))?!1:(this.set("value",""),!0)}})}(),function(){"use strict";Flame.StackItemView=Flame.ListItemView.extend({useAbsolutePosition:!0,classNames:["flame-stack-item-view"]})}(),function(){"use strict";Flame.StackView=Flame.ListView.extend({layoutManager:Flame.VerticalStackLayoutManager.create({topMargin:0,spacing:0,bottomMargin:0}),allowSelection:!1})}(),function(){"use strict";Flame.TabView=Flame.View.extend({classNames:["flame-tab-view"],childViews:["tabBarView","contentView"],tabs:null,previousTabs:null,nowShowing:null,tabsHeight:23,initializeTabsLazily:!0,init:function(){this._super(),Ember.isNone(this.get("tabs"))||this._tabsDidChange()},_tabsWillChange:function(){var e=this.get("tabs");Ember.isNone(e)||this.set("previousTabs",e.slice())}.observesBefore("tabs.[]"),_tabsDidChange:function(){var e=this.get("tabs");if(!Ember.isNone(e)){var t=this.get("previousTabs");Ember.isNone(t)||t.forEach(function(t){if(Ember.isNone(e.findBy("value",t.value))){var i=this.get("tabBarView");i.forEach(function(e){e.get("value")===t.value&&i.removeChild(e)})}},this),e.forEach(function(e,i){(Ember.isNone(t)||Ember.isNone(t.findBy("value",e.value)))&&this._addTab(e,i)},this)}}.observes("tabs.[]"),_addTab:function(e,t){var i=this.get("contentView"),n=this.get("tabBarView"),s=this.get("tabsHeight"),r=this,o={acceptsKeyResponder:!1,layout:{top:0,bottom:0,height:s},title:e.title,value:e.value,tabView:this,isSelected:Ember.computed.equal("parentView.parentView.nowShowing",e.value),action:function(){r.set("nowShowing",e.value)}};e.tabClass&&(o.classNameBindings=["tabView.%@.%@".fmt(e.value,e.tabClass)]),n.insertAt(t,n.createChildView(Flame.ButtonView.createWithMixins(o)));var a=this.get(e.value);this.get("initializeTabsLazily")||(a instanceof Ember.View||(a=i.createChildView(a)),a.set("isVisible",!1),i.pushObject(a),this.set(e.value,a)),Ember.isNone(this.get("nowShowing"))&&this.set("nowShowing",this.get("tabs").objectAt(0).value)},_tabWillChange:function(){this.get("nowShowing")&&this.get(this.get("nowShowing")).set("isVisible",!1)}.observesBefore("nowShowing"),_tabDidChange:function(){if(this.get("nowShowing")){var e=this.get("nowShowing"),t=this.get(e);if(!(t instanceof Ember.View)){var i=this.get("contentView");t=i.createChildView(t),i.pushObject(t),this.set(e,t)}t.set("isVisible",!0)}}.observes("nowShowing").on("init"),tabBarView:Flame.View.extend({classNames:["flame-tab-view-tabs"],layout:{left:0,top:0,right:0,height:"parentView.tabsHeight"}}),contentView:Flame.View.extend({classNames:["flame-tab-view-content"],layout:{left:0,top:"parentView.tabsHeight",right:0,bottom:0}})})}(),function(){"use strict";var e=/webkit/i.test(window.navigator.userAgent);Flame.TableDataView=Flame.View.extend(Flame.Statechart,{classNames:["flame-table-data-view"],acceptsKeyResponder:!0,batchUpdates:!0,updateBatchSize:500,_updateCounter:0,selectedCell:null,selectionEnd:null,editValue:null,content:null,tableViewDelegate:null,initialFlameState:"loaded",loaded:Flame.State.extend({mouseDown:function(e){var t=this.get("owner");return t.selectCell(t._cellForTarget(e.target),!1)?(t.get("selection").show(),this.gotoFlameState("mouseIsDown"),!0):!1},enterState:function(){var e=this.get("owner");e.set("selectedCell",null),e.set("selectionEnd",null),"inDOM"===e.get("_state")&&e.get("selection").children().addBack().hide()}}),mouseIsDown:Flame.State.extend({lastTarget:null,mouseMove:function(e){if(e.target!==this.lastTarget){var t=this.get("owner"),i=t._cellForTarget(e.target);i&&t.isCellSelectable(i)&&t.set("selectionEnd",i),this.lastTarget=e.target}return!0},mouseUp:function(e){return this.gotoFlameState("selected"),this.get("owner").invokeStateMethod("mouseUp",e)}}),selected:Flame.State.extend({cellUp:function(e){return jQuery(e.parent().prev().children()[e.attr("data-index")])},cellDown:function(e){return jQuery(e.parent().next().children()[e.attr("data-index")])},modifySelection:function(e){var t=this.get("owner");return t.isCellSelectable(e)?(t.set("selectionEnd",e),t.notifySelectionChange(),!0):!1},_trim:function(e){return e=e.replace(/\r\n|\r/g,"\n"),e=e.replace(/^[^\S\t]+|[^\S\t]+$/g,"")},pasteValue:function(e){e=this._trim(e);var t=this.get("owner"),i=t.get("data"),n=this.get("owner.selectedCell"),s=t.rowIndex(n),r=t.columnIndex(n),o=function(e){var i=t.get("tableViewDelegate");i&&i.pasteDidFail&&i.pasteDidFail(e)};if(!/\n|\t/.test(e)&&n!==this.get("owner.selectionEnd"))return void this._forEachSelectedCell(function(i,n,s){if(s&&s.isEditable()&&s.isPastable()){var r=t.$("tr[data-index=%@]".fmt(i)).find("td[data-index=%@]".fmt(n)).first();t._validateAndSet(e,r)||o(e)}});var a=n.parent().add(n.parent().nextAll());e.split("\n").forEach(function(e,n){e.split("	").forEach(function(e,l){var h=a[n]&&a.eq(n).children().eq(r+l);if(h){var u=i[s+n][r+l];if(u&&u.isEditable()&&u.isPastable()){if(u.options()){var c=u.options().findBy("title",e);if(!c)return void o(e);e=c.value}t._validateAndSet(e,h)||o(e)}}})})},valueForCopy:function(){var e,t=[];return this._forEachSelectedCell(function(i,n,s,r){r&&(Ember.isEmpty(e)||t.push(e.join("	")),e=[]),e.push(s&&s.isCopyable()?s.editableValue():"")}),Ember.isEmpty(e)||t.push(e.join("	")),t.join("\n")},_forEachSelectedCell:function(e){for(var t=this.get("owner"),i=t.get("selectedCell"),n=t.get("selectionEnd"),s=Math.min(t.rowIndex(i),t.rowIndex(n)),r=Math.max(t.rowIndex(i),t.rowIndex(n)),o=Math.min(t.columnIndex(i),t.columnIndex(n)),a=Math.max(t.columnIndex(i),t.columnIndex(n)),l=t.get("data"),h=s;r>=h;h++)for(var u=!0,c=o;a>=c;c++)e(h,c,l[h][c],u),u=!1},_getCellUnderSelection:function(e){var t=this.get("owner");t.get("selection").hide();var i=document.elementFromPoint(e.clientX,e.clientY);return t.get("selection").show(),i},mouseDown:function(e){var t=this.get("owner");jQuery(e.target).hasClass("table-selection")&&(e.target=this._getCellUnderSelection(e));var i=jQuery(e.target),n=t.get("selectedDataCell");if(!Ember.isNone(n)&&n.options&&n.options()&&i.is("td")&&t._cellForTarget(e.target)[0]===t.get("selectedCell")[0])return this.startEdit(),!0;var s=t._cellForTarget(e.target);return e.shiftKey&&t.isCellSelectable(s)?(t.set("selectionEnd",s),!0):i.closest(".table-selection").length?!0:(this.gotoFlameState("loaded"),t.invokeStateMethod("mouseDown",e))},mouseUp:function(e){var t=this.get("owner.tableViewDelegate");if(t&&t.mouseUp){var i=jQuery(e.target);i.hasClass("table-selection")&&(e.target=this._getCellUnderSelection(e),i=jQuery(e.target));var n=i.is("td")?i:jQuery(this._getCellUnderSelection(e)),s=n.attr("data-index"),r=n.parent().attr("data-index");if(s&&r){var o=this.get("owner.data")[r][s],a=[r,s];t.mouseUp(e,n,o,a,this.get("owner"))}}},keyDown:function(e,t){var i=this.get("owner"),n=i.get("selectedDataCell");if((e.ctrlKey||e.metaKey)&&!Ember.isNone(n)){var s=i.get("selectedCell").position(),r=i.get("parentView.scrollable"),o=i.$(".clipboard-container");o.css({left:s.left+r.scrollLeft(),top:s.top+r.scrollTop()}),o.empty().show();var a=jQuery("<textarea></textarea>").val(this.valueForCopy()).appendTo(o).focus().select(),l=this;return a.on("paste",function(e){var t=e.originalEvent.clipboardData||window.clipboardData,i=t.getData("Text");Ember.run.later(l,function(){this.pasteValue(i)},100)}),!1}return!i._handleKeyEvent("keyDown",e,t)},keyUp:function(e){var t=jQuery(e.target);if(t.hasClass("clipboard-container textarea")){t.off("paste");var i=this.$(".clipboard-container");return i.empty().hide(),!0}return!1},keyPress:function(e){if(e.ctrlKey||e.metaKey)return!1;var t=this.get("owner.selectedDataCell");if(Ember.isNone(t)||!t.isEditable())return!1;var i=String.fromCharCode(e.which);if(/[a-zA-Z0-9+*\-\[\/\=]/.test(i)){var n=this.get("owner");return n.set("editValue",i),this.startEdit(),!0}return!1},insertNewline:function(){return this.startEdit()},deleteBackward:function(){return this.wipeCell(),!0},deleteForward:function(){return this.wipeCell(),!0},wipeCell:function(){var e=this.get("owner.selectedDataCell");Ember.isNone(e)||e.isEditable()&&this.get("owner")._validateAndSet("")},doubleClick:function(){this.startEdit()},startEdit:function(){var e=this.get("owner.selectedDataCell");if(!Ember.isNone(e)){var t=this.get("owner");e.isEditable()?(t.set("selectionEnd",t.get("selectedCell")),this.gotoFlameState("editing")):e.options()||(t.set("selectionEnd",t.get("selectedCell")),this.gotoFlameState("selectingReadOnly"))}},cancel:function(){return this.get("owner").resignKeyResponder(),!0},moveLeft:function(){return this.get("owner").selectCell(this.get("owner.selectedCell").prev()),!0},moveLeftAndModifySelection:function(){return this.modifySelection(this.get("owner.selectionEnd").prev())},moveRight:function(){return this.get("owner").selectCell(this.get("owner.selectedCell").next()),!0},moveRightAndModifySelection:function(){return this.modifySelection(this.get("owner.selectionEnd").next())},moveDown:function(){return this.get("owner").selectCell(this.cellDown(this.get("owner.selectedCell"))),!0},moveDownAndModifySelection:function(){return this.modifySelection(this.cellDown(this.get("owner.selectionEnd")))},moveUp:function(){return this.get("owner").selectCell(this.cellUp(this.get("owner.selectedCell"))),!0},moveUpAndModifySelection:function(){return this.modifySelection(this.cellUp(this.get("owner.selectionEnd")))},insertTab:function(){return this.get("owner").invokeStateMethod("moveRight"),!0},insertBacktab:function(){return this.get("owner").invokeStateMethod("moveLeft"),!0},enterState:function(){this.get("owner").notifySelectionChange()},exitState:function(){if("inDOM"===this.get("owner._state")){var e=this.$(".clipboard-container");e&&e.empty().hide()}}}),selectingReadOnly:Flame.State.extend({cancel:function(){return this.get("owner")._cancelEditingOrSelecting(),!0},insertNewline:function(){var e=this.get("owner");this.gotoFlameState("selected"),e.invokeStateMethod("moveDown")},moveLeft:function(){this._invokeInSelected("moveLeft")},moveRight:function(){this._invokeInSelected("moveRight")},moveDown:function(){this._invokeInSelected("moveDown")},moveUp:function(){this._invokeInSelected("moveUp")},insertTab:function(){this._invokeInSelected("insertTab")},insertBacktab:function(){this._invokeInSelected("insertBacktab")},deleteBackward:function(){return this.gotoFlameState("selected"),!0},mouseDown:function(e){var t=this.get("owner"),i=t._cellForTarget(e.target);return t.isCellSelectable(i)?(this.gotoFlameState("selected"),t.selectCell(i),!0):!1},enterState:function(){var e=this.get("owner"),t=e.get("selection"),i=e.get("selectedDataCell"),n=Handlebars.Utils.escapeExpression(e.editableValue(i,!0));this.selectionContent=t.html(),t.html(n),t.addClass("read-only is-selectable")},exitState:function(){var e=this.get("owner.selection");e.html(this.selectionContent),e.removeClass("read-only is-selectable")},_invokeInSelected:function(e){var t=this.get("owner");this.gotoFlameState("selected"),t.invokeStateMethod(e)}}),editing:Flame.State.extend({cancel:function(){return this.get("owner")._cancelEditingOrSelecting(),!0},moveLeft:function(){return Flame.ALLOW_BROWSER_DEFAULT_HANDLING},moveRight:function(){return Flame.ALLOW_BROWSER_DEFAULT_HANDLING},insertNewline:function(){var e=this.get("owner");return e._confirmEdit()&&(this.gotoFlameState("selected"),e.invokeStateMethod("moveDown")),!0},insertTab:function(){var e=this.get("owner");return e._confirmEdit()&&(this.gotoFlameState("selected"),e.invokeStateMethod("insertTab")),!0},insertBacktab:function(){var e=this.get("owner");return e._confirmEdit()&&(this.gotoFlameState("selected"),e.invokeStateMethod("insertBacktab")),!0},mouseDown:function(e){var t=this.get("owner"),i=t._cellForTarget(e.target),n=t.get("editField");return t.isCellSelectable(i)&&t._confirmEdit()?(this.gotoFlameState("selected"),t.selectCell(i),!0):Ember.isEmpty(i)||!n||i[0]===n[0]||t._confirmEdit()?!1:(n.focus(),!0)},enterState:function(){var e=this.get("owner"),t=e.get("selectedCell"),i=e.get("selectedDataCell"),n=e.get("editField"),s=e.get("selection"),r=i.options();if(t.addClass("editing"),!i.showEditor(t,e,e.get("content")))if(r){var o=Flame.MenuView.createWithMixins({minWidth:t.outerWidth(),parent:e,items:r.map(function(t){return{title:t.title,value:t.value,isChecked:t.value===i.value,action:function(){e.didSelectMenuItem(this.get("value"))}}}),close:function(){e.gotoFlameState("selected"),this._super()}});o.popup(t)}else{var a=t.css("backgroundColor");["rgba(0, 0, 0, 0)","transparent"].contains(a)&&(a="white"),n.css({left:parseInt(s.css("left"),10)+parseInt(s.css("border-left-width"),10)+"px",top:parseInt(s.css("top"),10)+parseInt(s.css("border-top-width"),10)+"px",width:s.outerWidth()-parseInt(s.css("border-left-width"),10)-parseInt(s.css("border-right-width"),10)+"px",height:s.outerHeight()-parseInt(s.css("border-top-width"),10)-parseInt(s.css("border-bottom-width"),10)+"px",backgroundColor:a});var l=e.editableValue(i);n.val(l),n.attr("placeholder",i.placeholder()),e.set("editValue",null),n.show(),n.selectRange(l.length,l.length)}},exitState:function(){var e=this.get("owner"),t=e.get("editField");t.hide(),t.removeClass("invalid"),e.get("selectedCell").removeClass("editing")}}),notifySelectionChange:function(){var e=this.get("tableViewDelegate");e&&e.didMakeSelection&&e.didMakeSelection(this,this.get("selectedCell"),this.get("selectionEnd"),this.get("selectedDataCell"))},didSelectMenuItem:function(e){var t=this.get("editField");t.val(e||""),this._confirmEdit(),this.invokeStateMethod("moveDown")},willLoseKeyResponder:function(){this.gotoFlameState("loaded")},columnIndex:function(e){return parseInt(e.attr("data-index"),10)},rowIndex:function(e){return parseInt(e.parent().attr("data-index"),10)},selectedDataCell:function(){var e=this.get("selectedCell");return this.get("data")[this.rowIndex(e)][this.columnIndex(e)]}.property().volatile(),editableValue:function(e,t){var i=this.get("editValue");return null!==i?i:(i=t?e.formattedValue():e.editableValue(),Ember.isNone(i)?"":i)},didInsertElement:function(){this.set("selection",this.$(".table-selection")),this.set("editField",this.$(".table-edit-field"))},_selectionDidChange:function(){Ember.run.once(this,this._updateSelection)}.observes("selectedCell","selectionEnd"),_updateSelection:function(){var e=this.get("selectedCell");if(e){var t=this.get("selection"),i=this.get("parentView.scrollable"),n=e.position(),s=i.scrollTop(),r=i.scrollLeft();if(e.addClass("active-cell"),t.css(this._selectionCSS(e,this.get("selectionEnd"),s,r,n)),"resizing"!==this.get("parentView.currentFlameState.name"))if(n.top<0)i.scrollTop(s+n.top);else if(n.top+e.outerHeight()>i.outerHeight()){var o=n.top+e.outerHeight()-i.outerHeight();i.scrollTop(o+s+17)}else if(n.left<0)i.scrollLeft(r+n.left);else if(n.left+e.outerWidth()>i.outerWidth()){var a=n.left+e.outerWidth()-i.outerWidth();i.scrollLeft(a+r+17)}}},_selectionCSS:function(t,i,n,s,r){var o=e?0:1;i=i||t;var a=r,l=t===i?r:i.position(),h=Math.min(a.left,l.left),u=Math.min(a.top,l.top),c=Math.max(a.left,l.left),d=Math.max(a.top,l.top),g=a.left<l.left?i.outerWidth():t.outerWidth(),m=a.top<l.top?i.outerHeight():t.outerHeight();return{left:h+s-o,top:u+n-o,width:c+g-h-5,height:d+m-u-3}},_selectionWillChange:function(){var e=this.get("selectedCell");e&&e.removeClass("active-cell")}.observesBefore("selectedCell"),_confirmEdit:function(){var e=this.get("editField").val();return this._validateAndSet(e)?!0:(this.get("editField").addClass("invalid"),!1)},_validateAndSet:function(e,t){var i=this.get("data"),n=t||this.get("selectedCell"),s=this.columnIndex(n),r=this.rowIndex(n),o=i[r][s];if(0===Ember.compare(o.editableValue(),e))return!0;if(o.validate(e)){var a=this.get("tableViewDelegate"),l=[r,s];if(a.cellUpdated(o,e,l)){var h=this.get("dirtyCells").slice();h.push([r,s]),this.set("dirtyCells",h)}return!0}return!1},_cancelEditingOrSelecting:function(){this.gotoFlameState("selected")},selectCell:function(e,t){return this.get("parentView.allowSelection")&&this.isCellSelectable(e)?(this.setProperties({selectedCell:e,selectionEnd:e}),t!==!1&&this.notifySelectionChange(),!0):!1},isCellSelectable:function(e){return e&&e[0]&&"TD"===e[0].nodeName},_cellForTarget:function(e){return jQuery(e).closest("td",this.$())},updateColumnWidth:function(e,t){var i=this.$("td[data-index=%@]".fmt(e));i.first().css("width",t),this.propertyDidChange("selectedCell")},render:function(e){this.gotoFlameState("loaded"),this._renderTable(e)},_renderTable:function(e){var t=this.get("data");if(t&&t[0]){var i,n=t.length,s=t[0].length,r=this.get("parentView.defaultColumnWidth"),o=this.get("parentView.content.columnLeafs"),a=Handlebars.Utils.escapeExpression,l="flame-table";this.get("parentView.allowSelection")||(l+=" is-selectable");var h=document.createElement("div");e.begin("table").attr("class",l).attr("width","1px"),e.pushOpeningTag();for(var u=0;n>u;u++){e.push('<tr data-index="'+u+'">');for(var c=0;s>c;c++){var d,g=t[u][c],m="",p="",f="";if(g){if(d=g.content(),d=Ember.isNone(d)?"":d,d instanceof HTMLElement||d instanceof DocumentFragment){for(;h.firstChild;)h.removeChild(h.firstChild);h.appendChild(d),d=h.innerHTML}else d=a(d);m=g.cssClassesString(),g.inlineStyles&&(f=g.inlineStyles()),p=g.titleValue&&g.titleValue()?'title="%@"'.fmt(a(g.titleValue())):""}else d='<span style="color: #999">...</span>';i=o[c].get("render_width")||r,e.push('<td data-index="%@" class="%@" style="width: %@px; %@" %@>%@</td>'.fmt(c,m+(c%2===0?" even-col":" odd-col"),i,p,f,d))}e.push("</tr>")}e.pushClosingTag(),e.push('<div class="table-selection"></div>'),e.push('<input type="text" class="table-edit-field">'),e.push('<div class="clipboard-container"></div>')}},_cellsDidChange:function(){this.manipulateCells(this.get("dirtyCells"),function(e,t,i){var n=(e?e.cssClassesString():"")+(i?" even-col":" odd-col"),s=e.content(),r=e.titleValue&&e.titleValue(),o=e.inlineStyles?e.inlineStyles():"",a=t.style.width;if(Ember.isNone(a)||(o="width: %@; %@".fmt(a,o)),t.setAttribute("style",o),t.className=n,s instanceof HTMLElement||s instanceof DocumentFragment){for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(s)}else t.textContent=Ember.isNone(s)?"":s;r&&(t.title=r)},++this._updateCounter)}.observes("dirtyCells").on("init"),_updatingCellsDidChange:function(){this.manipulateCells(this.get("cellsMarkedForUpdate"),function(e,t,i){if(e.pending)e.pending.isUpdating=!0,t.className+=i?" even-col":" odd-col";else{e.isUpdating=!0;var n=e.cssClassesString()+(i?" even-col":" odd-col");t.className=n}})}.observes("cellsMarkedForUpdate"),manipulateCells:function(e,t,i){var n=this.get("data");if(e&&0!==e.length&&this.$()){var s=this.$("table.flame-table"),r=s.find("td"),o=e.splice(0,e.length),a=this.get("batchUpdates")?this.get("updateBatchSize"):-1;this._batchUpdate(a,0,i,o,n,r,t)}},_batchUpdate:function(e,t,i,n,s,r,o){if("undefined"==typeof i||i===this._updateCounter){for(var a,l,h,u=n.length,c=s[0].length,d=-1===e?u:e,g=t;u>g&&d>g-t;g++){l=n[g];var m=l[0],p=l[1];s[m][p]||(s[m][p]={pending:{}}),h=s[m][p],a=r[m*c+p],a&&o(h,a,p%2===0)}if(u>g){var f=this;Ember.run.next(function(){f._batchUpdate(e,g,i,n,s,r,o)})}}}})}(),function(){"use strict";var e=Ember.computed.alias,t=function(){var e=this.get("scrollable");e&&e.off("scroll")};Flame.TableView=Flame.View.extend(Flame.Statechart,{MIN_COLUMN_WIDTH:30,classNames:["flame-table-view"],childViews:["tableDataView"],displayProperties:["contentAdapter.headers"],acceptsKeyResponder:!1,scrollable:null,rowHeader:null,columnHeader:null,tableCorner:null,renderColumnHeader:!0,renderRowHeader:!0,isRowHeaderClickable:!0,isResizable:!0,allowSelection:!1,initialFlameState:"idle",defaultColumnWidth:88,rowHeaderWidth:null,content:null,allowRefresh:!0,batchUpdates:!0,useAutoWidth:!1,tableViewDelegate:null,contentAdapter:function(){return Flame.TableViewContentAdapter.create({content:this.get("content")})}.property("content"),tableDataView:Flame.TableDataView.extend({dataBinding:"parentView.content._data",content:e("parentView.content"),dirtyCells:e("parentView.content.dirtyCells"),areValuesOnRows:e("parentView.content.areValuesOnRows"),totalRowIds:e("parentView.content.totalRowIds"),totalColumnIds:e("parentView.content.totalColumnIds"),tableViewDelegate:e("parentView.tableViewDelegate"),cellsMarkedForUpdate:e("parentView.content.cellsMarkedForUpdate"),batchUpdates:e("parentView.batchUpdates")}),rowDepth:function(){return this.get("contentAdapter.rowHeaderRows.maxDepth")}.property("contentAdapter.rowHeaderRows"),idle:Flame.State.extend({mouseDown:function(e){this.gotoFlameState("clickInProgress");var t=jQuery(e.target);if(t.is("div.resize-handle")){var i=this.get("owner"),n=i.get("tableDataView");"editing"===n.get("currentFlameState.name")&&n.cancel();var s=t.closest("td");return i.setProperties({resizingCell:s,dragStartX:e.pageX,startX:s.get(0).clientWidth+1,offset:parseInt(this.get("owner.tableCorner").css("width"),10),type:s.is(".column-header td")?"column":"row"}),this.gotoFlameState("resizing"),!0}return t.closest(".column-header").length?!0:t.is("a")?!0:!1},doubleClick:function(e){var t=this.get("owner");if(!t.get("useAutoWidth"))return!1;var i,n,s=jQuery(e.target);if(s.closest(".column-header").length&&(i=s.closest("td").attr("data-leaf-index"))){n=this.get("owner.content.columnLeafs")[i];var r=t.getColumnContents(n).map(function(e){return e}).join("<br>"),o=Flame.measureString(r,"ember-view"),a="bold"===s.closest("td").css("font-weight"),l=Flame.measureString(t.getLeafHeaderLabel(n),"ember-view","label",a?"font-weight:bold;":""),h=Math.max(o.width,l.width)+40;h<t.MIN_COLUMN_WIDTH&&(h=t.MIN_COLUMN_WIDTH),t.setColumnWidth(n.leafIndex,h);var u=t.get("tableViewDelegate");return u&&u.columnResized&&u.columnResized(i,h),!0}return!1}}),clickInProgress:Flame.State.extend({mouseUp:function(e){this.gotoFlameState("idle");var t=this.get("owner.tableViewDelegate");if(t){var i,n=jQuery(e.target);if(n.closest(".column-header").length){if(t.columnHeaderClicked){var s=parseInt(n.closest("tr").attr("class").match(/level\-(\d+)/)[1],10),r=this.get("owner.contentAdapter.columnHeaderRows")[s-1];i=r[n.closest("tr").find("td").index(n.closest("td"))],t.columnHeaderClicked(i,n)}return!0}if(n.closest(".row-header").length){if(t.rowHeaderClicked){var o=n.closest("td"),a=parseInt(o.attr("data-index"),10);if(i=this.get("owner.content._headers.rowHeaders")[a],!i)return!1;t.rowHeaderClicked(i,n,a)}return!0}}return!1}}),resizing:Flame.State.extend({enterState:function(){var e=this.get("owner.resizingCell"),t=e.closest("table"),i=t.find("col");if("column"===this.get("owner.type")){var n=parseInt(e.attr("data-leaf-index"),10);this.set("resizingColumn",i.eq(n))}else{var s=i.length,r=[];t.find("td").each(function(){var e=$(this);return e.attr("colspan")||r.push(e),r.length===s?!1:void 0}),this.set("cells",r);var o=0;e.nextAll().each(function(){o+=$(this).attr("colspan")||1});var a=s-o-1;this.set("resizingColumn",i.eq(a)),this.set("owner.resizingCell",r[a]),this.set("owner.startX",r[a].get(0).clientWidth+1)}},mouseMove:function(e){var t=this.get("owner"),i=e.pageX-t.get("dragStartX"),n=t.get("MIN_COLUMN_WIDTH"),s=t.get("startX")+i;if(n>s&&(s=n),"column"===t.get("type"))this.get("resizingColumn").css("width",s),t._synchronizeColumnWidth(s);else{var r=t.get("offset")+s-t.get("startX");t.get("scrollable").css("left",r),t.get("columnHeader").parent().css("left",r),t.get("tableCorner").css("width",r),this.get("resizingColumn").css("width",s)}},mouseUp:function(){var e=this.get("owner"),t=e.get("tableViewDelegate");if(t){var i=e.get("resizingCell");if("column"===e.get("type")&&t.columnResized){var n=parseInt(i.css("width"),10),s=parseInt(i.attr("data-leaf-index"),10);t.columnResized(s,n)}else if(t.rowHeaderResized){var r=this.get("cells").map(function(e){return e.outerWidth()});t.rowHeaderResized(r)}}return this.gotoFlameState("idle"),!0}}),setColumnWidth:function(e,t){this.$(".column-header col").eq(e).css("width",t+3);var i=this.objectAt(0);i.updateColumnWidth(e,t+3)},_setColumnHeaderHeights:function(e,t,i){e.forEach(function(e,i){var n=this.$(".column-header .level-"+(i+1));n.find(".content-container").css("height",e*t),n.find(".resize-handle").css("height",e*t-1),n.find(".label").css("white-space",1===e?"nowrap":"normal")},this);var n=2+e.length-1;e.forEach(function(e){n+=e*t}),this.$(".scrollable").css("top",n+i),this.$(".table-corner").css("height",n),this.$(".row-header").css("top",n+i)},getColumnContents:function(e){return this.get("content.tableData").map(function(t){var i=t[e.leafIndex];return Ember.isNone(i)?"":i.formattedValue()})},getLeafHeaderLabel:function(e){var t=this.get("content.columnLeafs")[e.leafIndex];return t.get("headerLabel")},_synchronizeColumnWidth:function(e){var t=this.get("resizingCell"),i=this.objectAt(0),n=parseInt(t.attr("data-leaf-index"),10);i.updateColumnWidth(n,e)},willInsertElement:t,willDestroyElement:t,didInsertElement:function(){this.set("scrollable",this.$(".scrollable")),this.set("rowHeader",this.$(".row-header table")),this.set("columnHeader",this.$(".column-header table")),this.set("tableCorner",this.$(".table-corner")),this.get("scrollable").on("scroll",jQuery.proxy(this.didScroll,this))},isScrolling:!1,didScroll:function(){var e=this.get("scrollable");this.lastScrollTop=e.scrollTop(),this.lastScrollLeft=e.scrollLeft(),this.isScrolling||requestAnimationFrame(jQuery.proxy(this._updateHeaderPositions,this)),this.isScrolling=!0},_updateHeaderPositions:function(){this.lastScrollTop!==this.lastSetScrollTop&&(this.get("rowHeader").css("top",-this.lastScrollTop),this.lastSetScrollTop=this.lastScrollTop),this.lastScrollLeft!==this.lastSetScrollLeft&&(this.get("columnHeader").css("left",-this.lastScrollLeft),this.lastSetScrollLeft=this.lastScrollLeft),this.isScrolling=!1},render:function(e){var t=this.get("renderColumnHeader"),i=this.get("renderRowHeader"),n=!1,s=this.get("contentAdapter.headers");if(s){this.get("content.title")&&(e.push('<div class="panel-title">%@</div>'.fmt(Handlebars.Utils.escapeExpression(this.get("content.title")))),n=!0);var r=this.get("defaultColumnWidth"),o=this.get("rowHeaderWidth")||r,a=this.get("content").rowHeaderWidths?this.get("content").rowHeaderWidths():null,l=this.get("contentAdapter.columnHeaderRows"),h=this.get("contentAdapter.rowHeaderRows"),u=21*l.maxDepth+1+l.maxDepth,c=0;if(i)if(a){for(var d=0,g=0;g<Math.max(h.maxDepth,1);g++)d+=isNaN(a[g])?o:a[g];c=d+1+(t?0:5)}else c=h.maxDepth*o+1+(t?0:5);var m=n?18:0;t&&(e.push('<div class="table-corner" style="top: %@px; left: 0; height: %@px; width: %@px;"></div>'.fmt(m,u,c)),this._renderHeader(e,"column",c,r),m+=u),i&&this._renderHeader(e,"row",m,o),e.push('<div class="scrollable" style="overflow: auto; bottom: 0; top: %@px; left: %@px; right: 0;">'.fmt(m,c)),this.forEach(function(t){t.renderToBuffer(e)}),e.push("</div>")}},_renderHeader:function(e,t,i,n){var s=this.get("contentAdapter.headers");
if(!s)return void e.push("<div></div>");var r,o;"column"===t?(s=this.get("contentAdapter.columnHeaderRows"),r="left"):(s=this.get("contentAdapter.rowHeaderRows"),r="top");var a=s.length;if(e.begin("div").addClass("%@-header".fmt(t)).attr("style","position: absolute; %@: %@px".fmt(r,i)),e.pushOpeningTag(),e.begin("table").attr("style","position: absolute").attr("width","1px"),e.pushOpeningTag(),e.push("<colgroup>"),"row"===t){var l=this.get("content").rowHeaderWidths?this.get("content").rowHeaderWidths():null;for(o=0;o<(s.maxDepth||1);o++){var h=l&&l[o]?l[o]:n;e.push('<col style="width: %@px;" class="level-%@">'.fmt(h,o+1))}}else{var u=this.get("content.columnLeafs").length;for(o=0;u>o;o++)e.push('<col style="width: %@px;">'.fmt(this.get("content.columnLeafs")[o].get("render_width")||n))}for(e.push("</colgroup>"),o=0;a>o;o++)e.push("column"===t?'<tr class="level-%@">'.fmt(o+1):"<tr>"),this._renderRow(e,s[o],t,o),e.push("</tr>");e.pushClosingTag(),e.pushClosingTag()},_renderRow:function(e,t,i){function n(e){if(e.hasOwnProperty("children")){for(var t=0,i=0;i<e.children.length;i++)t+=n(e.children[i]);return t}return 1}for(var s,r,o,a=t.length,l=0;a>l;l++){var h=t[l];e.begin("td"),o=h.get?h.get("headerLabel"):h.label,o||(o=""),o=Ember.Handlebars.Utils.escapeExpression(o).replace(/&lt;br&gt;/g,"<br>"),e.attr("title",o.replace(/<br>/g,"\n")),h.rowspan>1&&e.attr("rowspan",h.rowspan),h.colspan>1&&e.attr("colspan",h.colspan),s='<div class="label">%@</div>';var u="";if(e.attr("class",l%2===0?"even-col":"odd-col"),"column"!==i||h.hasOwnProperty("children")){if("row"===i&&(e.attr("data-index",h.dataIndex),this.get("renderColumnHeader"))){if(this.get("isResizable"))if(h.hasOwnProperty("children")){var c=n(h);u='<div class="resize-handle" style="height: %@px"></div>'.fmt(21*c)}else u='<div class="resize-handle"></div>';this.get("isRowHeaderClickable")&&h.get("isClickable")&&(s="%@")}}else{e.attr("data-index",l),e.attr("data-leaf-index",h.leafIndex),this.get("isResizable")&&this.get("renderColumnHeader")&&(u='<div class="resize-handle">&nbsp;</div>');var d=this.get("tableViewDelegate");if(d&&d.getSortForHeader){var g=d.getSortForHeader(h);r=g?g.direction:null}var m=r?"sort-%@".fmt(r):"";s='<div class="label '+m+'">%@</div>'}e.pushOpeningTag(),e.push('<div class="content-container">'),e.push(u),e.push(s.fmt(o)),e.push("</div>"),e.pushClosingTag()}}})}(),function(){"use strict";Flame.TextAreaView=Flame.View.extend({classNames:["flame-text"],childViews:["textArea"],layout:{left:0,top:0},defaultHeight:20,defaultWidth:200,acceptsKeyResponder:!0,value:"",placeholder:null,isValid:null,isVisible:!0,isDisabled:!1,readonly:!1,becomeKeyResponder:function(){this.get("textArea").becomeKeyResponder()},textArea:Ember.TextArea.extend(Flame.EventManager,Flame.FocusSupport,{classNameBindings:["isInvalid","isFocused"],acceptsKeyResponder:!0,isValid:null,isInvalid:Ember.computed.equal("isValid",!1),value:Ember.computed.alias("parentView.value"),placeholder:Ember.computed.alias("parentView.placeholder"),isVisible:Ember.computed.alias("parentView.isVisible"),disabled:Ember.computed.alias("parentView.isDisabled"),readonly:Ember.computed.alias("parentView.readonly"),keyDown:function(){return!1},keyUp:function(){return this._elementValueDidChange(),!1}})})}(),function(){"use strict";Flame.TreeItemView=Flame.ListItemView.extend({useAbsolutePositionBinding:"parentView.rootTreeView.useAbsolutePositionForItems",classNames:["flame-tree-item-view"],classNameBindings:["parentView.nestingLevel"],isExpanded:function(e,t){return 1===arguments.length?void 0!==this._isExpanded?this._isExpanded:this.get("content.treeItemIsExpanded")||this.get("defaultIsExpanded"):(this._isExpanded=t,t)}.property("content.treeItemIsExpanded","defaultIsExpanded"),layout:{left:0,right:0,top:0,height:0},defaultIsExpanded:function(){return this.get("parentView.rootTreeView.defaultIsExpanded")}.property("parentView.rootTreeView.defaultIsExpanded"),isSelected:function(){return!1}.property(),classAttribute:function(){return this.get("content")===this.get("parentView.rootTreeView.selection")?"flame-tree-item-view-container is-selected":"flame-tree-item-view-container"}.property("content","parentView.rootTreeView.selection"),handlebars:'<div {{bind-attr class="view.classAttribute"}}><div class="flame-tree-item-view-pad">{{#if view.hasChildren}}{{view view.toggleButton}}{{/if}}{{view view.treeItemViewClass content=view.content}}</div></div>{{#if view.renderSubTree}}{{view view.nestedTreeView}}{{/if}}',renderSubTree:function(){return this.get("hasChildren")&&this.get("isExpanded")}.property(),_updateSubTreeRendering:function(){var e=this.get("renderSubTree");!e&&this.get("isExpanded")&&this.get("hasChildren")&&(this.propertyWillChange("renderSubTree"),this.propertyDidChange("renderSubTree"))}.observes("hasChildren","isExpanded"),treeItemViewClass:Flame.View.extend({useAbsolutePosition:!1,layout:{top:0,left:0,right:0,height:20},classNames:["flame-tree-item-view-content"],contentIndexBinding:"parentView.contentIndex",handlebars:function(){return this.get("parentView.parentView.rootTreeView").handlebarsForItem(this.get("content"))}.property("content")}),childListView:function(){return this.get("renderSubTree")?this.get("lastObject.firstObject"):null}.property("showsubTree"),hasChildren:function(){return!Ember.isNone(this.get("content.treeItemChildren"))}.property("content.treeItemChildren").volatile(),mouseUp:function(){return this.get("parentView.rootTreeView.clickTogglesIsExpanded")&&this.toggleProperty("isExpanded"),!1},toggleButton:Flame.DisclosureView.extend({classNames:["flame-tree-view-toggle"],ignoreLayoutManager:!0,useAbsolutePosition:!1,acceptsKeyResponder:!1,visibilityTargetBinding:"parentView.isExpanded",action:function(){return!1}}),nestedTreeView:function(){return Flame.TreeView.extend({useAbsolutePosition:this.get("parentView.rootTreeView.useAbsolutePositionForItems"),layoutManager:Flame.VerticalStackLayoutManager.create({topMargin:0,spacing:0,bottomMargin:0}),layout:{top:0,left:0,right:0},classNames:["flame-tree-view-nested"],isVisible:Ember.computed.bool("parentView.isExpanded"),allowSelection:this.get("parentView.rootTreeView.allowSelection"),allowReordering:this.get("parentView.rootTreeView.allowReordering"),content:this.get("content.treeItemChildren"),itemViewClass:this.get("parentView.rootTreeView.itemViewClass"),isNested:!0})}.property("content").volatile()})}(),function(){"use strict";Flame.TreeView=Flame.ListView.extend({classNames:["flame-tree-view"],classNameBindings:["isNested","nestingLevel"],defaultIsExpanded:!1,itemViewClass:Flame.TreeItemView,isNested:!1,clickTogglesIsExpanded:!0,useAbsolutePositionForItems:!1,handlebarsForItem:function(e){var t=this.get("handlebarsMap")||{};return t[e.constructor.toString()]||t.defaultTemplate},nestingLevel:function(){return"level-%@".fmt(this.get("treeLevel"))}.property("treeLevel").volatile(),_treeSelectionDidChange:function(){var e=this.get("selection"),t=this.get("parentTreeView");e&&t&&(t.set("selection",e),this.set("selection",void 0))}.observes("selection"),startReordering:function(e,t){var i=this.get("parentTreeView");i?(e.get("itemPath").insertAt(0,this.get("parentView.contentIndex")),i.startReordering(e,t)):(Flame.set("mouseResponderView",this),this._super(e,t))},treeLevel:function(){return(this.get("parentTreeView.treeLevel")||0)+1}.property("parentTreeView.treeLevel").volatile(),parentTreeView:function(){return this.get("isNested")?this.get("parentView.parentView"):void 0}.property("isNested","parentView.parentView").volatile(),rootTreeView:function(){return this.get("parentTreeView.rootTreeView")||this}.property("parentTreeView.rootTreeView").volatile()})}(),function(){"use strict";Flame.VerticalSplitView=Flame.SplitView.extend({classNames:["flame-vertical-split-view"],childViews:["leftView","dividerView","rightView"],leftWidth:100,rightWidth:100,minLeftWidth:0,minRightWidth:0,flex:"right",_unCollapsedLeftWidth:void 0,_unCollapsedRightWidth:void 0,_resizeStartX:void 0,_resizeStartLeftWidth:void 0,_resizeStartRightWidth:void 0,init:function(){this._super(),"right"===this.get("flex")?this.set("rightWidth",void 0):this.set("leftWidth",void 0)},_updateLayout:function(){var e=this.get("leftView"),t=this.get("dividerView"),i=this.get("rightView"),n=this.$().innerWidth(),s=this.get("dividerThickness"),r="right"===this.get("flex")?this.get("leftWidth"):void 0,o="left"===this.get("flex")?this.get("rightWidth"):void 0;void 0===r&&void 0!==o&&null!==n&&0!==n&&(r=n-o-s),void 0===o&&void 0!==r&&null!==n&&0!==n&&(o=n-r-s),"number"==typeof r&&r<this.get("minLeftWidth")&&(o+=r-this.get("minLeftWidth"),r=this.get("minLeftWidth")),"number"==typeof o&&o<this.get("minRightWidth")&&(r+=o-this.get("minRightWidth"),o=this.get("minRightWidth")),this.set("leftWidth",r),this.set("rightWidth",o),"right"===this.get("flex")?(this._setDimensions(e,0,r,""),this._setDimensions(t,r,s,""),this._setDimensions(i,r+s,"",0)):(this._setDimensions(e,0,"",o+s),this._setDimensions(t,"",s,o),this._setDimensions(i,"",o,0))}.observes("leftWidth","rightWidth","minLeftWidth","minRightWidth"),_setDimensions:function(e,t,i,n){e.get("layout").setProperties({left:t,width:i,right:n,top:0,bottom:0}),e.updateLayout()},toggleCollapse:function(){this.get("allowResizing")&&("right"===this.get("flex")?this.get("leftWidth")===this.get("minLeftWidth")&&void 0!==this._unCollapsedLeftWidth?this.set("leftWidth",this._unCollapsedLeftWidth):(this._unCollapsedLeftWidth=this.get("leftWidth"),this.set("leftWidth",this.get("minLeftWidth"))):this.get("rightWidth")===this.get("minRightWidth")&&void 0!==this._unCollapsedRightWidth?this.set("rightWidth",this._unCollapsedRightWidth):(this._unCollapsedRightWidth=this.get("rightWidth"),this.set("rightWidth",this.get("minRightWidth"))))},startResize:function(e){this._resizeStartX=e.pageX,this._resizeStartLeftWidth=this.get("leftWidth"),this._resizeStartRightWidth=this.get("rightWidth")},resize:function(e){"right"===this.get("flex")?this.set("leftWidth",this._resizeStartLeftWidth+(e.pageX-this._resizeStartX)):this.set("rightWidth",this._resizeStartRightWidth-(e.pageX-this._resizeStartX))}})}(),function(){"use strict";Flame.Validator=Ember.Object.extend({validate:function(){return!0},validateValue:function(e){return this.validate(Ember.Object.create({value:e}),"value")},isValidProperty:function(e){return e+"IsValid"}}),Flame.Validatable=Ember.Mixin.create({_propertyValidity:null,_objectIsValid:null,_validations:null,isValidProperty:function(e){return e+"IsValid"},validateProperty:function(e,t,i,n){Ember.isNone(n)&&(n=!1),void 0===i&&(i=e.get(t));var s=e.get("validations")[t],r=null;if(jQuery.isPlainObject(s)){var o=s;s=o.validation,r=o.coupledProperties}var a;jQuery.isArray(s)||(s=[s]);for(var l=0;l<s.length&&(a=this._validate(s[l],e,t,i));l++);var h=this.isValidProperty(t);if(e.beginPropertyChanges(),e.set(h,a),!n&&r){if(!jQuery.isArray(r))throw new Error("Hint: coupledProperties must be an array!");for(var u=0;u<r.length;u++){var c=r[u];c!==t&&this.validateProperty(this,c,void 0,!0)}}e.set("isValid",e._checkValidity()),e.endPropertyChanges()},invalidProperties:function(){var e=[],t=this.get("validations");for(var i in t)this.get(this.isValidProperty(i))!==!0&&e.push(i);return e}.property().volatile(),_validate:function(e,t,i,n){var s=null;return e instanceof Flame.Validator?s=e.validate(t,i):Ember.isNone(e)||(s=e.call(this,n)),s},_checkValidity:function(e){var t=this.get("validations");for(var i in t)if(e&&this.validateProperty(this,i,this.get(i)),t.hasOwnProperty(i)&&this.get(this.isValidProperty(i))!==!0)return!1;return!0},isValid:function(e,t){return"undefined"!=typeof t&&(this._objectIsValid=t),null===this._objectIsValid&&(this._objectIsValid=this._checkValidity()),this._objectIsValid}.property().volatile(),validations:function(e,t){return Ember.isNone(t)||(null===this._validations?this._validations=t:Ember.Logger.info("Trying to set validations after the validations have already been set!")),this._validations}.property().volatile(),_createIsValidProperties:function(){var e,t=this.get("validations");for(e in t)t.hasOwnProperty(e)&&this._createIsValidProperty(e);for(e in t)t.hasOwnProperty(e)&&(this.addObserver(e,this,"validateProperty"),this.validateProperty(this,e))},_createIsValidProperty:function(e){null===this._propertyValidity&&(this._propertyValidity={});var t=this;Ember.defineProperty(this,this.isValidProperty(e),Ember.computed(function(e,i){return"undefined"!=typeof i&&(t.propertyWillChange(e),t._propertyValidity[e]=i,t.propertyDidChange(e)),t._propertyValidity[e]}).property().volatile())},setValidationFor:function(e,t){var i=this.get("validations");(i===this.constructor.prototype.validations||null===i)&&(i=jQuery.extend({},i),this.set("validations",i)),i[e]=t,this._createIsValidProperty(e),this.removeObserver(e,this,"validateProperty"),this.addObserver(e,this,"validateProperty"),this.validateProperty(this,e)},unknownProperty:function(e){var t=/^(.+)IsValid$/.exec(e),i=this.get("validations");if(t&&i){var n=t[1];if(i[n])return this._createIsValidProperties(),this.get(e)}return this.__nextSuper?this._super(e):void 0},setUnknownProperty:function(e,t){var i=/^(.+)IsValid$/.exec(e),n=this.get("validations");if(i&&n){var s=i[1];if(n[s])return this._createIsValidProperties(),this.set(e,t)}return this.__nextSuper?this._super(e,t):(Ember.defineProperty(this,e),this.set(e,t))}})}(),function(){"use strict";Flame.Validator.association=Flame.Validator.create({validate:function(e,t,i){void 0===i&&(i=!1);var n=e.get(t);return Ember.isArray(n)?n.every(function(e){return i?e._checkValidity(!0):e.get("isValid")}):n?i?n._checkValidity(!0):n.get("isValid"):!0}})}(),function(){"use strict";var e=/^(([A-Za-z0-9]+_+)|([A-Za-z0-9]+\-+)|([A-Za-z0-9]+\.+)|([A-Za-z0-9]+\++))*[A-Za-z0-9\-]+@((\w+\-+)|(\w+\.))*\w{1,63}\.[a-zA-Z]{2,6}$/i;Flame.Validator.email=Flame.Validator.create({validate:function(t,i){return e.test(t.get(i))}})}(),function(){"use strict";Flame.Validator.notBlank=Flame.Validator.create({validate:function(e,t){return!Ember.isBlank(e.get(t))}})}(),function(){"use strict";Flame.Validator.number=Flame.Validator.create({validate:function(e,t){var i=e.get(t);return""===i||!(isNaN(i)||isNaN(parseFloat(i)))}})}(),function(){"use strict";Flame.VERSION="0.2.1-535-g2af37d9"}();